Project Structure:
==================
.
|-- .DS_Store
|-- .git
|   |-- branches
|   |-- COMMIT_EDITMSG
|   |-- config
|   |-- description
|   |-- FETCH_HEAD
|   |-- HEAD
|   |-- hooks
|   |   |-- applypatch-msg.sample
|   |   |-- commit-msg.sample
|   |   |-- fsmonitor-watchman.sample
|   |   |-- post-update.sample
|   |   |-- pre-applypatch.sample
|   |   |-- pre-commit.sample
|   |   |-- pre-merge-commit.sample
|   |   |-- pre-push.sample
|   |   |-- pre-rebase.sample
|   |   |-- pre-receive.sample
|   |   |-- prepare-commit-msg.sample
|   |   |-- push-to-checkout.sample
|   |   |-- sendemail-validate.sample
|   |   `-- update.sample
|   |-- index
|   |-- info
|   |   `-- exclude
|   |-- logs
|   |   |-- HEAD
|   |   `-- refs
|   |       |-- heads
|   |       |   `-- main
|   |       `-- remotes
|   |           `-- origin
|   |               |-- HEAD
|   |               `-- main
|   |-- objects
|   |   |-- 00
|   |   |   `-- 904938dfc38f29af563b779d1d7a10f1c8b7f0
|   |   |-- 01
|   |   |   |-- 6915b64512f2e75dd15147d8bec74c37775b23
|   |   |   `-- f1f7cbcf434ca87f95360f2e776b21bee45d74
|   |   |-- 04
|   |   |   `-- feb8a73cda7ca7097234719cb4cf25dc54a64d
|   |   |-- 06
|   |   |   `-- a641dda1e1b6487785fbefcedbdb0485202c23
|   |   |-- 07
|   |   |   |-- 43d4e80003d1e88517ff08246dc60d2fc3e837
|   |   |   `-- 7ddae406b17eace8aef330b1b7fda7d7b4c0c7
|   |   |-- 0c
|   |   |   `-- 9389d20bda1599dcbb0c22ee462730b438d314
|   |   |-- 16
|   |   |   `-- 9698f70cd318d964b28b0013fef71cecbb10ea
|   |   |-- 29
|   |   |   `-- b4ebd624dfc1466c2b86632101d501e9ebfbd9
|   |   |-- 2d
|   |   |   `-- d1d5e9598fc12a6df89aaa85a5fd0c7285e3d0
|   |   |-- 30
|   |   |   |-- 207b4bf5e58cb1cd8949b99bdaeabf24636e60
|   |   |   `-- 50941a340377f07b171da2d8c00a2fd687524b
|   |   |-- 35
|   |   |   `-- 5bd5b00d0e7af2173798e9a42bec4e28404a58
|   |   |-- 37
|   |   |   `-- 01498bbef0fd230b6baa448401bb1490ec08fd
|   |   |-- 38
|   |   |   `-- ffac91be6043f3687dfe84cd158758f10de300
|   |   |-- 39
|   |   |   `-- c3abbf602c324704916e1e96c41f8779d0667d
|   |   |-- 3b
|   |   |   `-- 07e9811116d9d5b3757c7527b3a0a7867c5be7
|   |   |-- 3f
|   |   |   `-- 87c99cc684b7746b4cf1563fadcd37b9a4d9a2
|   |   |-- 43
|   |   |   |-- 27e2fcfcefdc6aa79c60df36e6a66861d36463
|   |   |   `-- 61a5af948da6e2bb849985c012e8fef7f4d7ce
|   |   |-- 45
|   |   |   |-- 52722d1a8887fd6ab8a6559242185a78147683
|   |   |   `-- 95cef06c0625b01bb1ceae7ab2e296c2cc0611
|   |   |-- 46
|   |   |   |-- 28e0bb26441d82cde48d01766d8bf29e2ad8ac
|   |   |   `-- 9cdd181d610c9f2df5fc89251fb6009ba34fbc
|   |   |-- 4c
|   |   |   `-- c5f7c66fcb9bd522ebfabdfffeec3853c6ca63
|   |   |-- 4d
|   |   |   `-- c6405e96c3fc1473f7a92492f11ae135dcc0d5
|   |   |-- 4f
|   |   |   `-- 3354cff99603ab67ad6ed56a7fdaa04b3df593
|   |   |-- 50
|   |   |   `-- e2248fc59c0cdb13273de72270f1c41b91b78a
|   |   |-- 51
|   |   |   |-- 84ba43493eeb4016b54391c9c1963ba7b5b82b
|   |   |   `-- b06f7e88a8efeac3feb60139216b8ba9968ed5
|   |   |-- 52
|   |   |   `-- 67461c0e6c1bccccaa6b1bbc77da43765daa95
|   |   |-- 67
|   |   |   `-- 9eda08fca1de5488159b1c56902ce408632c18
|   |   |-- 6a
|   |   |   `-- 0703eefffeadb59c764a56fffd99cf5dc76e92
|   |   |-- 74
|   |   |   |-- 2fd9368bb2c3f3c1d44d7929d716bbf338c5bf
|   |   |   `-- 6ac9d1568cc8be136596fe2747267343bf4cb5
|   |   |-- 76
|   |   |   `-- 6fd3c0ff11f2d96fbee3875dcb4368239be3cf
|   |   |-- 79
|   |   |   `-- 3deddb91c51aa85c046a166bbd910728db9088
|   |   |-- 8d
|   |   |   `-- 6f76ef3869bf654d9d6b2891a382ff4da48425
|   |   |-- 92
|   |   |   `-- 3755559f75be54552078e8f2752b5e7208adaf
|   |   |-- 93
|   |   |   `-- 484edd62c6fbef41da85bc7c59acc30da9fe6a
|   |   |-- 94
|   |   |   `-- 3eca54343d402c5394b26c90360d72f62b4813
|   |   |-- 97
|   |   |   `-- bfb57b3f27cf3a620fc6b7e5e0bd43baba6e0d
|   |   |-- a0
|   |   |   `-- b34bce5f729802c4e8b8480ab456273a9c575a
|   |   |-- a9
|   |   |   `-- 2dbf1423f2e1fd72bea69c001726aa7b36de86
|   |   |-- b0
|   |   |   `-- 01962e5a5a02839f849a92a6b623cfd62b4ba6
|   |   |-- b1
|   |   |   |-- 0c872da8661eeeea3a824af1b97b8dde4737b5
|   |   |   `-- 9da24ee3079ffc2412e4e9c2497c2cb0c88ed8
|   |   |-- b7
|   |   |   `-- abafe879781f95d558240def52418a2c816cb9
|   |   |-- b8
|   |   |   `-- 581ba9aff3831ea3e65fc5c528cee5da778c02
|   |   |-- ba
|   |   |   `-- 67d83f6ff932e55b3b096daad20659c89e7a89
|   |   |-- bd
|   |   |   `-- 277f945c2764d860c41ed43cd9ba89f098f227
|   |   |-- be
|   |   |   `-- d0770bab245f624d9d51b1c047fbcf2a7f0c61
|   |   |-- c3
|   |   |   `-- f6f98a72ef5243295ee52d9fcffbf32da10e8b
|   |   |-- c4
|   |   |   `-- b060c37c510f9efeeaf2a313321376588b0db2
|   |   |-- d3
|   |   |   `-- 88f692f928608286fa647986db113d9a4faddf
|   |   |-- d5
|   |   |   `-- ca7148ebd749d48280daabdf01012ec73c863b
|   |   |-- df
|   |   |   |-- d4f249a6243721dc5b14ed6e20d3e0d44362e8
|   |   |   `-- e0770424b2a19faf507a501ebfc23be8f54e7b
|   |   |-- e2
|   |   |   `-- 8c1ab1701303d587d61b247dd1aabe971f2cc6
|   |   |-- e7
|   |   |   `-- 40b462a5249896ac16c166aba4ecc83c9a3452
|   |   |-- ea
|   |   |   `-- f580d3ff473448af5e96c1d66aad81bad0b025
|   |   |-- f7
|   |   |   `-- 8dc69412340d014baa97047d5f8c696a0dc738
|   |   |-- fb
|   |   |   `-- 53a99380b7c0742316a0ccf9947a7bfc052c5a
|   |   |-- fd
|   |   |   `-- 6be8db23df0504d5b8a80290e9e5de74d69f1c
|   |   |-- fe
|   |   |   `-- eb762c7b67816f60088529bdaf3cb265f8e410
|   |   |-- info
|   |   `-- pack
|   `-- refs
|       |-- heads
|       |   `-- main
|       |-- remotes
|       |   `-- origin
|       |       |-- HEAD
|       |       `-- main
|       `-- tags
|-- .gitattributes
|-- assets
|   |-- .DS_Store
|   |-- css
|   |   |-- print.css
|   |   `-- style.css
|   `-- js
|       |-- .DS_Store
|       |-- app.js
|       |-- file-system.js
|       |-- pages
|       |   |-- clients.js
|       |   |-- dashboard.js
|       |   |-- dishes.js
|       |   |-- events.js
|       |   |-- help.js
|       |   `-- preferences.js
|       |-- storage.js
|       `-- ui.js
|-- clients.html
|-- content.json
|-- dishes.html
|-- event-detail.html
|-- events.html
|-- help.html
|-- index.html
|-- preferences.html
`-- project_code.txt




### START OF FILE: ./content.json ####################################################

{
  "appName": "Catering",
  "companyDetails": {
    "address": "123 Culinary Ave, Foodie Town, 12345",
    "phone": "+91-9876543210",
    "email": "orders@cateringapp.example"
  },
  "navigation": {
    "dashboard": "Dashboard",
    "events": "Events",
    "clients": "Clients",
    "dishes": "Dish Library",
    "preferences": "Preferences",
    "help": "Help"
  },
  "dashboard": {
    "title": "Dashboard",
    "welcome": "Welcome back!",
    "upcomingEvents": "Upcoming Events"
  },
  "events": {
    "title": "Event Management",
    "allEvents": "All Events",
    "addNew": "Add New Event"
  },
  "eventDetail": {
    "createTitle": "Create New Event",
    "editTitle": "Edit Event",
    "eventDetails": "Event Details",
    "clientName": "Client Name",
    "eventDate": "Event Date",
    "venue": "Venue",
    "guestCount": "Guest Count",
    "status": "Status",
    "menuBuilder": "Menu & Budget Builder",
    "addDish": "Add Dish",
    "totalCost": "Total Estimated Cost",
    "advancePaid": "Advance Paid",
    "balancePayable": "Balance Payable",
    "saveEvent": "Save Event"
  },
  "clients": {
    "title": "Client Management",
    "allClients": "All Clients",
    "addNew": "Add New Client",
    "name": "Name",
    "email": "Email",
    "phone": "Phone",
    "address": "Address"
  },
  "dishes": {
    "title": "Dish Library",
    "allDishes": "All Dishes",
    "addNew": "Add New Dish",
    "dishName": "Dish Name",
    "category": "Category",
    "price": "Price (per serving)",
    "description": "Description",
    "saveDish": "Save Dish"
  },
  "preferences": {
    "title": "Preferences & Data",
    "importExport": "Import / Export Data",
    "importDesc": "Load data from a backup file. This will overwrite all current data.",
    "importButton": "Import from File",
    "exportDesc": "Save all current data to a local backup file.",
    "exportButton": "Export to File",
    "autoSave": "Auto-Save",
    "autoSaveDesc": "Automatically back up data to a chosen local file.",
    "autoSaveButton": "Set Auto-Save File"
  },
  "help": {
    "title": "Help & FAQ"
  },
  "general": {
    "actions": "Actions",
    "edit": "Edit",
    "delete": "Delete",
    "close": "Close"
  }
}

### END OF FILE: ./content.json ######################################################



### START OF FILE: ./preferences.html ####################################################

<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preferences - Catering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" type="image/x-icon" href="/catering-app/favicon.ico">

</head>
<body class="h-full font-['Poppins',_sans-serif] text-slate-800">
    <div id="app-wrapper" class="flex h-full">
        <main class="flex-1 p-8 overflow-y-auto">
            <div class="max-w-4xl mx-auto">
                <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>

                <div class="mt-8 space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h2 id="autosave-title" class="text-xl font-semibold"></h2>
                        <div id="autosave-status-inactive" class="mt-4">
                            <p id="autosave-desc" class="text-slate-600"></p>
                            <button id="autosave-button-activate" class="mt-4 bg-emerald-500 text-white px-4 py-2 rounded-lg shadow hover:bg-emerald-600 transition-colors"></button>
                        </div>
                        <div id="autosave-status-active" class="mt-4 hidden">
                            <p class="text-slate-600">Auto-save is configured to use the following file:</p>
                            <p id="autosave-filename" class="mt-2 font-medium text-indigo-600 bg-indigo-50 p-2 rounded-md"></p>
                            <p id="autosave-permission-status" class="mt-2 text-sm font-medium h-4"></p>
                            <p id="autosave-sync-status" class="mt-1 text-sm text-slate-500 h-4"></p>
                            <button id="autosave-button-forget" class="mt-4 text-sm text-red-600 hover:underline">Forget this file and disable auto-save</button>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h2 id="import-export-title" class="text-xl font-semibold"></h2>
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                            <div>
                                <p id="export-desc" class="text-slate-600"></p>
                                <button id="export-button" class="mt-2 bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700 transition-colors"></button>
                            </div>
                            <div>
                                <p id="import-desc" class="text-slate-600"></p>
                                <button id="import-button" class="mt-2 bg-sky-400 text-white px-4 py-2 rounded-lg shadow hover:bg-sky-500 transition-colors"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script type="module" src="assets/js/app.js"></script>
</body>
</html>

### END OF FILE: ./preferences.html ######################################################



### START OF FILE: ./help.html ####################################################

<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help - Catering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="h-full font-['Poppins',_sans-serif] text-slate-800">
    <div id="app-wrapper" class="flex h-full">
        <main class="flex-1 p-4 md:p-8 overflow-y-auto">
            <div class="max-w-4xl mx-auto">
                <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>

                <section class="mt-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm prose max-w-none">
                        <h2>Getting Started</h2>
                        <p>Welcome to the Catering Management app! This tool is designed to be your all-in-one solution for managing clients, creating a library of your dishes, and planning events down to the last detail.</p>
                        
                        <h3>Core Concepts</h3>
                        <p>The app is built around three main components: your <strong>Dish Library</strong>, your <strong>Clients</strong>, and your <strong>Events</strong>. For the best experience, it's recommended to add some dishes and clients before creating your first event.</p>
                    </div>
                </section>

                <section class="mt-8">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Feature Guide</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm flex flex-col gap-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                            <h3 class="text-lg font-semibold">Dashboard</h3>
                            <p class="text-sm text-slate-600">Get a quick overview of all events scheduled within the next 7 days.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm flex flex-col gap-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                            <h3 class="text-lg font-semibold">Event Management</h3>
                            <p class="text-sm text-slate-600">Create, manage, and print detailed event orders, complete with custom menus and financial details.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm flex flex-col gap-4">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                           <h3 class="text-lg font-semibold">Client Management</h3>
                           <p class="text-sm text-slate-600">Keep a record of all your clients, including their contact details and address for invoices.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm flex flex-col gap-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m-9-5.747h18"/></svg>
                            <h3 class="text-lg font-semibold">Dish Library</h3>
                            <p class="text-sm text-slate-600">A central repository of all your menu items, including categories and price per serving, for easy access.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm flex flex-col gap-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                            <h3 class="text-lg font-semibold">Preferences & Data</h3>
                            <p class="text-sm text-slate-600">Manage your data with Auto-Save for safety or use the manual Import/Export tools for portability.</p>
                        </div>
                    </div>
                </section>

                <section class="mt-8">
                     <h2 class="text-2xl font-bold text-slate-800 mb-4">Frequently Asked Questions</h2>
                     <div class="space-y-4">
                        <details class="group bg-white p-4 rounded-lg shadow-sm">
                            <summary class="flex justify-between items-center font-medium cursor-pointer list-none">
                                <span>Can I use this app on multiple devices?</span>
                                <span class="transition-transform group-open:rotate-180">
                                    <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-slate-600 mt-3">
                                Not simultaneously. The data is stored locally in the browser on a single computer. To move your data, use the <strong>Export</strong> feature on the old computer and the <strong>Import</strong> feature on the new one.
                            </div>
                        </details>
                        <details class="group bg-white p-4 rounded-lg shadow-sm">
                            <summary class="flex justify-between items-center font-medium cursor-pointer list-none">
                                <span>What is Auto-Save and why should I use it?</span>
                                <span class="transition-transform group-open:rotate-180">
                                    <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-slate-600 mt-3">
                                Auto-Save is the recommended way to keep your data safe. After setting it up once, the app will automatically back up your data to a local file every 15 seconds, but only when changes have been made. This protects you from accidental data loss.
                            </div>
                        </details>
                         <details class="group bg-white p-4 rounded-lg shadow-sm">
                            <summary class="flex justify-between items-center font-medium cursor-pointer list-none">
                                <span>What happens if I delete a Client or a Dish?</span>
                                <span class="transition-transform group-open:rotate-180">
                                    <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-slate-600 mt-3">
                                If you delete a client or a dish, any events that used them will be affected. A deleted client's name will show as "N/A", and a deleted dish will disappear from any event menus it was part of. This action cannot be undone.
                            </div>
                        </details>
                     </div>
                </section>
            </div>
        </main>
    </div>
    <script type="module" src="assets/js/app.js"></script>
</body>
</html>

### END OF FILE: ./help.html ######################################################



### START OF FILE: ./index.html ####################################################

<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Catering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="h-full font-['Poppins',_sans-serif] text-slate-800">
    <div id="app-wrapper" class="flex h-full">
        <main class="flex-1 p-4 md:p-8 overflow-y-auto">
            <div class="max-w-7xl mx-auto">
                <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>
                <p id="welcome-message" class="mt-2 text-slate-600"></p>

                <section class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div id="kpi-upcoming-events" class="bg-white p-6 rounded-xl shadow-sm flex items-center gap-4"></div>
                    <div id="kpi-upcoming-revenue" class="bg-white p-6 rounded-xl shadow-sm flex items-center gap-4"></div>
                    <div id="kpi-outstanding-payments" class="bg-white p-6 rounded-xl shadow-sm flex items-center gap-4"></div>
                    <div id="kpi-new-clients" class="bg-white p-6 rounded-xl shadow-sm flex items-center gap-4"></div>
                </section>

                <section class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <h2 id="upcoming-events-title" class="text-xl font-semibold mb-4"></h2>
                        <div id="upcoming-events-list" class="space-y-4">
                            </div>
                    </div>

                    <div class="space-y-8">
                        <div>
                           <h2 class="text-xl font-semibold mb-4">Events by Status</h2>
                           <div id="event-status-chart" class="bg-white p-6 rounded-xl shadow-sm space-y-4">
                               </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>
    <script type="module" src="assets/js/app.js"></script>
</body>
</html>

### END OF FILE: ./index.html ######################################################



### BINARY FILE SKIPPED: ./.DS_Store ###


### START OF FILE: ./clients.html ####################################################

<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clients - Catering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="h-full font-['Poppins',_sans-serif] text-slate-800">
    <div id="app-wrapper" class="flex h-full">
        <main class="flex-1 p-8 overflow-y-auto">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-between">
                    <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>
                    <button id="add-new-button" class="bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700 transition-colors"></button>
                </div>

                <div class="mt-8 bg-white p-6 rounded-xl shadow-sm">
                     <h2 id="sub-title" class="text-xl font-semibold mb-4"></h2>
                     <div id="clients-list" class="overflow-x-auto">
                        </div>
                </div>
            </div>
        </main>
    </div>

    <div id="client-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md">
            <div class="p-6 border-b">
                <h3 id="modal-title" class="text-xl font-semibold"></h3>
            </div>
            <form id="client-form" class="p-6 space-y-4">
                <input type="hidden" id="client-id">
                <div>
                    <label id="client-name-label" for="client-name" class="block text-sm font-medium text-slate-700"></label>
                    <input type="text" id="client-name" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label id="client-email-label" for="client-email" class="block text-sm font-medium text-slate-700"></label>
                    <input type="email" id="client-email" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label id="client-phone-label" for="client-phone" class="block text-sm font-medium text-slate-700"></label>
                    <input type="tel" id="client-phone" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label id="client-address-label" for="client-address" class="block text-sm font-medium text-slate-700"></label>
                    <textarea id="client-address" rows="3" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></textarea>
                </div>
            </form>
            <div class="p-6 bg-slate-50 rounded-b-xl flex justify-end gap-4">
                <button type="button" id="modal-close-button" class="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-300 hover:bg-slate-100">Cancel</button>
                <button type="submit" form="client-form" id="modal-save-button" class="bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700">Save Client</button>
            </div>
        </div>
    </div>
    <script type="module" src="assets/js/app.js"></script>
</body>
</html>

### END OF FILE: ./clients.html ######################################################



### START OF FILE: ./dishes.html ####################################################

<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dish Library - Catering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" type="image/x-icon" href="/catering-app/favicon.ico">

</head>
<body class="h-full font-['Poppins',_sans-serif] text-slate-800">
    <div id="app-wrapper" class="flex h-full">
        <main class="flex-1 p-8 overflow-y-auto">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-between">
                    <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>
                    <button id="add-new-button" class="bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700 transition-colors"></button>
                </div>

                <div class="mt-8 bg-white p-6 rounded-xl shadow-sm">
                     <h2 id="sub-title" class="text-xl font-semibold mb-4"></h2>
                     <div id="dishes-list" class="overflow-x-auto">
                        </div>
                </div>
            </div>
        </main>
    </div>

    <div id="dish-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md">
            <div class="p-6 border-b">
                <h3 id="modal-title" class="text-xl font-semibold"></h3>
            </div>
            <form id="dish-form" class="p-6 space-y-4">
                <input type="hidden" id="dish-id">
                <div>
                    <label id="dish-name-label" for="dish-name" class="block text-sm font-medium text-slate-700"></label>
                    <input type="text" id="dish-name" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label id="dish-category-label" for="dish-category" class="block text-sm font-medium text-slate-700"></label>
                    <input type="text" id="dish-category" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label id="dish-price-label" for="dish-price" class="block text-sm font-medium text-slate-700"></label>
                    <input type="number" id="dish-price" step="0.01" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label id="dish-description-label" for="dish-description" class="block text-sm font-medium text-slate-700"></label>
                    <textarea id="dish-description" rows="3" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></textarea>
                </div>
            </form>
            <div class="p-6 bg-slate-50 rounded-b-xl flex justify-end gap-4">
                <button type="button" id="modal-close-button" class="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-300 hover:bg-slate-100"></button>
                <button type="submit" form="dish-form" id="modal-save-button" class="bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700"></button>
            </div>
        </div>
    </div>
    
    <script type="module" src="assets/js/app.js"></script>
</body>
</html>

### END OF FILE: ./dishes.html ######################################################



### START OF FILE: ./event-detail.html ####################################################

<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Details - Catering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/print.css" media="print">
</head>
<body class="h-full font-['Poppins',_sans-serif] text-slate-800">
    <div id="app-wrapper" class="flex h-full">
        <main class="flex-1 p-8 overflow-y-auto">
            <div class="print-only hidden">
                <div class="print-header">
                    <div class="logo-mark" id="print-logo-mark">C</div>
                    <div class="company-details">
                        <h2 id="print-company-name">Catering</h2>
                        <p id="print-company-address"></p>
                        <p id="print-company-contact"></p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div id="print-client-details">
                        <h3 class="font-bold text-lg mb-1">Bill To:</h3>
                        <p id="print-client-name" class="font-semibold"></p>
                        <p id="print-client-address" class="whitespace-pre-wrap"></p>
                        <p id="print-client-contact"></p>
                    </div>
                    <div id="print-event-info" class="text-right">
                        <h2 class="font-bold text-2xl mb-2">EVENT ORDER</h2>
                        <p><span class="font-semibold">Event ID:</span> <span id="print-event-id"></span></p>
                        <p><span class="font-semibold">Event Date:</span> <span id="print-event-date"></span></p>
                        <p><span class="font-semibold">Venue:</span> <span id="print-event-venue"></span></p>
                        <p><span class="font-semibold">Guests:</span> <span id="print-event-guests"></span></p>
                        <p><span class="font-semibold">Status:</span> <span id="print-event-status"></span></p>
                    </div>
                </div>
            </div>

            <div class="max-w-4xl mx-auto">
                <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>
                
                <form id="event-form" class="mt-8 space-y-8">
                    <div id="web-event-details" class="bg-white p-6 rounded-xl shadow-sm">
                        </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between mb-6">
                            <h2 id="menu-builder-title" class="text-xl font-semibold"></h2>
                            <button type="button" id="add-dish-button" class="bg-sky-400 text-white px-4 py-2 rounded-lg shadow hover:bg-sky-500 transition-colors"></button>
                        </div>
                        <div id="menu-items-container" class="space-y-4"></div>
                        <div class="mt-6 pt-4 border-t border-slate-200 space-y-2 text-right">
                           <div class="flex justify-end items-center gap-4">
                               <span id="total-cost-label" class="text-lg font-semibold"></span>
                               <span id="total-cost-value" class="text-2xl font-bold text-slate-800 w-40 text-left">₹0.00</span>
                           </div>
                           <div class="flex justify-end items-center gap-4">
                               <label for="discount" class="text-lg font-semibold text-slate-600">Discount</label>
                               <input type="number" id="discount" min="0" placeholder="0.00" class="w-40 text-left rounded-md border-slate-300 shadow-sm">
                           </div>
                           <div class="flex justify-end items-center gap-4">
                               <label id="advance-paid-label" for="advance-paid" class="text-lg font-semibold text-slate-600"></label>
                               <input type="number" id="advance-paid" min="0" placeholder="0.00" class="w-40 text-left rounded-md border-slate-300 shadow-sm">
                           </div>
                           <div class="flex justify-end items-center gap-4 mt-2 pt-2 border-t">
                               <span id="balance-payable-label" class="text-lg font-bold"></span>
                               <span id="balance-payable-value" class="text-2xl font-bold text-emerald-600 w-40 text-left">₹0.00</span>
                           </div>
                        </div>
                    </div>

                     <div class="bg-white p-6 rounded-xl shadow-sm flex justify-between items-center">
                        <h2 class="text-xl font-semibold">Payment Status</h2>
                        <label class="flex items-center gap-3 cursor-pointer">
                            <span id="payment-collected-label" class="font-medium text-slate-700">Mark Final Payment as Collected</span>
                            <input type="checkbox" id="payment-collected" class="h-6 w-6 rounded border-slate-400 text-indigo-600 focus:ring-indigo-500">
                        </label>
                    </div>
                    
                    <div class="flex justify-end items-center gap-4">
                        <button type="button" id="print-button" class="bg-slate-200 text-slate-800 px-6 py-2 rounded-lg shadow-sm hover:bg-slate-300 transition-colors">Print</button>
                        <button type="submit" id="save-event-button" class="bg-indigo-600 text-white px-6 py-2 rounded-lg shadow hover:bg-indigo-700 transition-colors"></button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <div id="add-dish-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-20">
        </div>
    
    <script type="module" src="assets/js/app.js"></script>
</body>
</html>

### END OF FILE: ./event-detail.html ######################################################



### START OF FILE: ./.gitattributes ####################################################

# Auto detect text files and perform LF normalization
* text=auto

### END OF FILE: ./.gitattributes ######################################################



### START OF FILE: ./events.html ####################################################

<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events - Catering</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="h-full font-['Poppins',_sans-serif] text-slate-800">
    <div id="app-wrapper" class="flex h-full">
        <main class="flex-1 p-4 md:p-8 overflow-y-auto">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-between">
                    <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>
                    <a href="event-detail.html" id="add-new-button" class="bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700 transition-colors"></a>
                </div>

                <div class="mt-8 grid grid-cols-1 md:grid-cols-4 gap-4 items-center">
                    <div class="md:col-span-2">
                        <label for="search-events" class="sr-only">Search Events</label>
                        <input type="search" id="search-events" placeholder="Search by client name or venue..." class="w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="filter-status" class="sr-only">Filter by Status</label>
                        <select id="filter-status" class="w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                            <option value="all">All Statuses</option>
                            <option value="Tentative">Tentative</option>
                            <option value="Confirmed">Confirmed</option>
                            <option value="Completed">Completed</option>
                            <option value="Cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div>
                        <label for="filter-date" class="sr-only">Filter by Date</label>
                        <input type="date" id="filter-date" class="w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm text-slate-500">
                    </div>
                    <div class="md:col-span-4 flex justify-end">
                        <label class="flex items-center gap-2 text-sm font-medium text-slate-700">
                            <input type="checkbox" id="filter-uncollected" class="h-4 w-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500">
                            Show Uncollected Payments Only
                        </label>
                    </div>
                </div>

                <div class="mt-4 bg-white p-6 rounded-xl shadow-sm">
                     <h2 id="sub-title" class="text-xl font-semibold mb-4"></h2>
                     <div id="events-table-container">
                        </div>
                </div>
            </div>
        </main>
    </div>

    <div id="status-popover" class="hidden absolute z-20 bg-white rounded-lg shadow-xl border w-40">
        <ul id="status-options-list" class="p-1 text-sm text-slate-700">
            </ul>
    </div>

    <script type="module" src="assets/js/app.js"></script>
</body>
</html>

### END OF FILE: ./events.html ######################################################



### START OF FILE: ./.git/config ####################################################

[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true
	ignorecase = true
	precomposeunicode = true
[lfs]
	repositoryformatversion = 0
[remote "origin"]
	url = https://github.com/missionode/catering-app.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "main"]
	remote = origin
	merge = refs/heads/main
	vscode-merge-base = origin/main
	vscode-merge-base = origin/main

### END OF FILE: ./.git/config ######################################################



### BINARY FILE SKIPPED: ./.git/objects/92/3755559f75be54552078e8f2752b5e7208adaf ###


### BINARY FILE SKIPPED: ./.git/objects/0c/9389d20bda1599dcbb0c22ee462730b438d314 ###


### BINARY FILE SKIPPED: ./.git/objects/50/e2248fc59c0cdb13273de72270f1c41b91b78a ###


### BINARY FILE SKIPPED: ./.git/objects/3b/07e9811116d9d5b3757c7527b3a0a7867c5be7 ###


### BINARY FILE SKIPPED: ./.git/objects/04/feb8a73cda7ca7097234719cb4cf25dc54a64d ###


### BINARY FILE SKIPPED: ./.git/objects/6a/0703eefffeadb59c764a56fffd99cf5dc76e92 ###


### BINARY FILE SKIPPED: ./.git/objects/35/5bd5b00d0e7af2173798e9a42bec4e28404a58 ###


### BINARY FILE SKIPPED: ./.git/objects/51/b06f7e88a8efeac3feb60139216b8ba9968ed5 ###


### BINARY FILE SKIPPED: ./.git/objects/51/84ba43493eeb4016b54391c9c1963ba7b5b82b ###


### BINARY FILE SKIPPED: ./.git/objects/67/9eda08fca1de5488159b1c56902ce408632c18 ###


### BINARY FILE SKIPPED: ./.git/objects/93/484edd62c6fbef41da85bc7c59acc30da9fe6a ###


### BINARY FILE SKIPPED: ./.git/objects/94/3eca54343d402c5394b26c90360d72f62b4813 ###


### BINARY FILE SKIPPED: ./.git/objects/be/d0770bab245f624d9d51b1c047fbcf2a7f0c61 ###


### BINARY FILE SKIPPED: ./.git/objects/df/d4f249a6243721dc5b14ed6e20d3e0d44362e8 ###


### BINARY FILE SKIPPED: ./.git/objects/df/e0770424b2a19faf507a501ebfc23be8f54e7b ###


### BINARY FILE SKIPPED: ./.git/objects/bd/277f945c2764d860c41ed43cd9ba89f098f227 ###


### BINARY FILE SKIPPED: ./.git/objects/e2/8c1ab1701303d587d61b247dd1aabe971f2cc6 ###


### BINARY FILE SKIPPED: ./.git/objects/fd/6be8db23df0504d5b8a80290e9e5de74d69f1c ###


### BINARY FILE SKIPPED: ./.git/objects/fe/eb762c7b67816f60088529bdaf3cb265f8e410 ###


### BINARY FILE SKIPPED: ./.git/objects/fb/53a99380b7c0742316a0ccf9947a7bfc052c5a ###


### BINARY FILE SKIPPED: ./.git/objects/29/b4ebd624dfc1466c2b86632101d501e9ebfbd9 ###


### BINARY FILE SKIPPED: ./.git/objects/16/9698f70cd318d964b28b0013fef71cecbb10ea ###


### BINARY FILE SKIPPED: ./.git/objects/45/52722d1a8887fd6ab8a6559242185a78147683 ###


### BINARY FILE SKIPPED: ./.git/objects/45/95cef06c0625b01bb1ceae7ab2e296c2cc0611 ###


### BINARY FILE SKIPPED: ./.git/objects/74/6ac9d1568cc8be136596fe2747267343bf4cb5 ###


### BINARY FILE SKIPPED: ./.git/objects/74/2fd9368bb2c3f3c1d44d7929d716bbf338c5bf ###


### BINARY FILE SKIPPED: ./.git/objects/4c/c5f7c66fcb9bd522ebfabdfffeec3853c6ca63 ###


### BINARY FILE SKIPPED: ./.git/objects/4d/c6405e96c3fc1473f7a92492f11ae135dcc0d5 ###


### BINARY FILE SKIPPED: ./.git/objects/43/61a5af948da6e2bb849985c012e8fef7f4d7ce ###


### BINARY FILE SKIPPED: ./.git/objects/43/27e2fcfcefdc6aa79c60df36e6a66861d36463 ###


### BINARY FILE SKIPPED: ./.git/objects/07/7ddae406b17eace8aef330b1b7fda7d7b4c0c7 ###


### BINARY FILE SKIPPED: ./.git/objects/07/43d4e80003d1e88517ff08246dc60d2fc3e837 ###


### BINARY FILE SKIPPED: ./.git/objects/38/ffac91be6043f3687dfe84cd158758f10de300 ###


### BINARY FILE SKIPPED: ./.git/objects/00/904938dfc38f29af563b779d1d7a10f1c8b7f0 ###


### BINARY FILE SKIPPED: ./.git/objects/3f/87c99cc684b7746b4cf1563fadcd37b9a4d9a2 ###


### BINARY FILE SKIPPED: ./.git/objects/30/207b4bf5e58cb1cd8949b99bdaeabf24636e60 ###


### BINARY FILE SKIPPED: ./.git/objects/30/50941a340377f07b171da2d8c00a2fd687524b ###


### BINARY FILE SKIPPED: ./.git/objects/37/01498bbef0fd230b6baa448401bb1490ec08fd ###


### BINARY FILE SKIPPED: ./.git/objects/01/6915b64512f2e75dd15147d8bec74c37775b23 ###


### BINARY FILE SKIPPED: ./.git/objects/01/f1f7cbcf434ca87f95360f2e776b21bee45d74 ###


### BINARY FILE SKIPPED: ./.git/objects/06/a641dda1e1b6487785fbefcedbdb0485202c23 ###


### BINARY FILE SKIPPED: ./.git/objects/39/c3abbf602c324704916e1e96c41f8779d0667d ###


### BINARY FILE SKIPPED: ./.git/objects/52/67461c0e6c1bccccaa6b1bbc77da43765daa95 ###


### BINARY FILE SKIPPED: ./.git/objects/97/bfb57b3f27cf3a620fc6b7e5e0bd43baba6e0d ###


### BINARY FILE SKIPPED: ./.git/objects/d3/88f692f928608286fa647986db113d9a4faddf ###


### BINARY FILE SKIPPED: ./.git/objects/ba/67d83f6ff932e55b3b096daad20659c89e7a89 ###


### BINARY FILE SKIPPED: ./.git/objects/a0/b34bce5f729802c4e8b8480ab456273a9c575a ###


### BINARY FILE SKIPPED: ./.git/objects/b8/581ba9aff3831ea3e65fc5c528cee5da778c02 ###


### BINARY FILE SKIPPED: ./.git/objects/b1/0c872da8661eeeea3a824af1b97b8dde4737b5 ###


### BINARY FILE SKIPPED: ./.git/objects/b1/9da24ee3079ffc2412e4e9c2497c2cb0c88ed8 ###


### BINARY FILE SKIPPED: ./.git/objects/a9/2dbf1423f2e1fd72bea69c001726aa7b36de86 ###


### BINARY FILE SKIPPED: ./.git/objects/d5/ca7148ebd749d48280daabdf01012ec73c863b ###


### BINARY FILE SKIPPED: ./.git/objects/b7/abafe879781f95d558240def52418a2c816cb9 ###


### BINARY FILE SKIPPED: ./.git/objects/b0/01962e5a5a02839f849a92a6b623cfd62b4ba6 ###


### BINARY FILE SKIPPED: ./.git/objects/c3/f6f98a72ef5243295ee52d9fcffbf32da10e8b ###


### BINARY FILE SKIPPED: ./.git/objects/c4/b060c37c510f9efeeaf2a313321376588b0db2 ###


### BINARY FILE SKIPPED: ./.git/objects/ea/f580d3ff473448af5e96c1d66aad81bad0b025 ###


### BINARY FILE SKIPPED: ./.git/objects/f7/8dc69412340d014baa97047d5f8c696a0dc738 ###


### BINARY FILE SKIPPED: ./.git/objects/e7/40b462a5249896ac16c166aba4ecc83c9a3452 ###


### BINARY FILE SKIPPED: ./.git/objects/46/9cdd181d610c9f2df5fc89251fb6009ba34fbc ###


### BINARY FILE SKIPPED: ./.git/objects/46/28e0bb26441d82cde48d01766d8bf29e2ad8ac ###


### BINARY FILE SKIPPED: ./.git/objects/79/3deddb91c51aa85c046a166bbd910728db9088 ###


### BINARY FILE SKIPPED: ./.git/objects/2d/d1d5e9598fc12a6df89aaa85a5fd0c7285e3d0 ###


### BINARY FILE SKIPPED: ./.git/objects/4f/3354cff99603ab67ad6ed56a7fdaa04b3df593 ###


### BINARY FILE SKIPPED: ./.git/objects/8d/6f76ef3869bf654d9d6b2891a382ff4da48425 ###


### BINARY FILE SKIPPED: ./.git/objects/76/6fd3c0ff11f2d96fbee3875dcb4368239be3cf ###


### START OF FILE: ./.git/HEAD ####################################################

ref: refs/heads/main

### END OF FILE: ./.git/HEAD ######################################################



### START OF FILE: ./.git/info/exclude ####################################################

# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~

### END OF FILE: ./.git/info/exclude ######################################################



### START OF FILE: ./.git/logs/HEAD ####################################################

0000000000000000000000000000000000000000 8d6f76ef3869bf654d9d6b2891a382ff4da48425 bodhiintellect <nath.syam.1986@gmail.com> 1757959708 +0530	commit (initial): Initial commit
8d6f76ef3869bf654d9d6b2891a382ff4da48425 355bd5b00d0e7af2173798e9a42bec4e28404a58 bodhiintellect <nath.syam.1986@gmail.com> 1757987435 +0530	commit: Update app.js
355bd5b00d0e7af2173798e9a42bec4e28404a58 a92dbf1423f2e1fd72bea69c001726aa7b36de86 bodhiintellect <nath.syam.1986@gmail.com> 1757987632 +0530	commit: update the blank issue
a92dbf1423f2e1fd72bea69c001726aa7b36de86 feeb762c7b67816f60088529bdaf3cb265f8e410 bodhiintellect <nath.syam.1986@gmail.com> 1757987863 +0530	commit: update favicon
feeb762c7b67816f60088529bdaf3cb265f8e410 469cdd181d610c9f2df5fc89251fb6009ba34fbc bodhiintellect <nath.syam.1986@gmail.com> 1757988044 +0530	commit: Update events.html
469cdd181d610c9f2df5fc89251fb6009ba34fbc 4628e0bb26441d82cde48d01766d8bf29e2ad8ac bodhiintellect <nath.syam.1986@gmail.com> 1758012917 +0530	commit: update

### END OF FILE: ./.git/logs/HEAD ######################################################



### START OF FILE: ./.git/logs/refs/heads/main ####################################################

0000000000000000000000000000000000000000 8d6f76ef3869bf654d9d6b2891a382ff4da48425 bodhiintellect <nath.syam.1986@gmail.com> 1757959708 +0530	commit (initial): Initial commit
8d6f76ef3869bf654d9d6b2891a382ff4da48425 355bd5b00d0e7af2173798e9a42bec4e28404a58 bodhiintellect <nath.syam.1986@gmail.com> 1757987435 +0530	commit: Update app.js
355bd5b00d0e7af2173798e9a42bec4e28404a58 a92dbf1423f2e1fd72bea69c001726aa7b36de86 bodhiintellect <nath.syam.1986@gmail.com> 1757987632 +0530	commit: update the blank issue
a92dbf1423f2e1fd72bea69c001726aa7b36de86 feeb762c7b67816f60088529bdaf3cb265f8e410 bodhiintellect <nath.syam.1986@gmail.com> 1757987863 +0530	commit: update favicon
feeb762c7b67816f60088529bdaf3cb265f8e410 469cdd181d610c9f2df5fc89251fb6009ba34fbc bodhiintellect <nath.syam.1986@gmail.com> 1757988044 +0530	commit: Update events.html
469cdd181d610c9f2df5fc89251fb6009ba34fbc 4628e0bb26441d82cde48d01766d8bf29e2ad8ac bodhiintellect <nath.syam.1986@gmail.com> 1758012917 +0530	commit: update

### END OF FILE: ./.git/logs/refs/heads/main ######################################################



### START OF FILE: ./.git/logs/refs/remotes/origin/HEAD ####################################################

0000000000000000000000000000000000000000 8d6f76ef3869bf654d9d6b2891a382ff4da48425 Syam Nath <syamnath@Auraverse.local> 1757959718 +0530	remote set-head
355bd5b00d0e7af2173798e9a42bec4e28404a58 355bd5b00d0e7af2173798e9a42bec4e28404a58 Syam Nath <syamnath@Auraverse.local> 1757987440 +0530	remote set-head
a92dbf1423f2e1fd72bea69c001726aa7b36de86 a92dbf1423f2e1fd72bea69c001726aa7b36de86 Syam Nath <syamnath@Auraverse.local> 1757987638 +0530	remote set-head
feeb762c7b67816f60088529bdaf3cb265f8e410 feeb762c7b67816f60088529bdaf3cb265f8e410 Syam Nath <syamnath@Auraverse.local> 1757987869 +0530	remote set-head
469cdd181d610c9f2df5fc89251fb6009ba34fbc 469cdd181d610c9f2df5fc89251fb6009ba34fbc Syam Nath <syamnath@Auraverse.local> 1757988050 +0530	remote set-head
469cdd181d610c9f2df5fc89251fb6009ba34fbc 469cdd181d610c9f2df5fc89251fb6009ba34fbc Syam Nath <syamnath@Auraverse.local> 1758012913 +0530	remote set-head
4628e0bb26441d82cde48d01766d8bf29e2ad8ac 4628e0bb26441d82cde48d01766d8bf29e2ad8ac Syam Nath <syamnath@Auraverse.local> 1758012923 +0530	remote set-head
4628e0bb26441d82cde48d01766d8bf29e2ad8ac 4628e0bb26441d82cde48d01766d8bf29e2ad8ac Syam Nath <syamnath@Auraverse.local> 1758014746 +0530	remote set-head
4628e0bb26441d82cde48d01766d8bf29e2ad8ac 4628e0bb26441d82cde48d01766d8bf29e2ad8ac Syam Nath <syamnath@Auraverse.local> 1758016579 +0530	remote set-head

### END OF FILE: ./.git/logs/refs/remotes/origin/HEAD ######################################################



### START OF FILE: ./.git/logs/refs/remotes/origin/main ####################################################

0000000000000000000000000000000000000000 8d6f76ef3869bf654d9d6b2891a382ff4da48425 bodhiintellect <nath.syam.1986@gmail.com> 1757959717 +0530	update by push
8d6f76ef3869bf654d9d6b2891a382ff4da48425 355bd5b00d0e7af2173798e9a42bec4e28404a58 bodhiintellect <nath.syam.1986@gmail.com> 1757987438 +0530	update by push
355bd5b00d0e7af2173798e9a42bec4e28404a58 a92dbf1423f2e1fd72bea69c001726aa7b36de86 bodhiintellect <nath.syam.1986@gmail.com> 1757987636 +0530	update by push
a92dbf1423f2e1fd72bea69c001726aa7b36de86 feeb762c7b67816f60088529bdaf3cb265f8e410 bodhiintellect <nath.syam.1986@gmail.com> 1757987866 +0530	update by push
feeb762c7b67816f60088529bdaf3cb265f8e410 469cdd181d610c9f2df5fc89251fb6009ba34fbc bodhiintellect <nath.syam.1986@gmail.com> 1757988047 +0530	update by push
469cdd181d610c9f2df5fc89251fb6009ba34fbc 4628e0bb26441d82cde48d01766d8bf29e2ad8ac bodhiintellect <nath.syam.1986@gmail.com> 1758012921 +0530	update by push

### END OF FILE: ./.git/logs/refs/remotes/origin/main ######################################################



### START OF FILE: ./.git/description ####################################################

Unnamed repository; edit this file 'description' to name the repository.

### END OF FILE: ./.git/description ######################################################



### START OF FILE: ./.git/hooks/commit-msg.sample ####################################################

#!/bin/sh
#
# An example hook script to check the commit log message.
# Called by "git commit" with one argument, the name of the file
# that has the commit message.  The hook should exit with non-zero
# status after issuing an appropriate message if it wants to stop the
# commit.  The hook is allowed to edit the commit message file.
#
# To enable this hook, rename this file to "commit-msg".

# Uncomment the below to add a Signed-off-by line to the message.
# Doing this in a hook is a bad idea in general, but the prepare-commit-msg
# hook is more suited to it.
#
# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"

# This example catches duplicate Signed-off-by lines.

test "" = "$(grep '^Signed-off-by: ' "$1" |
	 sort | uniq -c | sed -e '/^[ 	]*1[ 	]/d')" || {
	echo >&2 Duplicate Signed-off-by lines.
	exit 1
}

### END OF FILE: ./.git/hooks/commit-msg.sample ######################################################



### START OF FILE: ./.git/hooks/pre-rebase.sample ####################################################

#!/bin/sh
#
# Copyright (c) 2006, 2008 Junio C Hamano
#
# The "pre-rebase" hook is run just before "git rebase" starts doing
# its job, and can prevent the command from running by exiting with
# non-zero status.
#
# The hook is called with the following parameters:
#
# $1 -- the upstream the series was forked from.
# $2 -- the branch being rebased (or empty when rebasing the current branch).
#
# This sample shows how to prevent topic branches that are already
# merged to 'next' branch from getting rebased, because allowing it
# would result in rebasing already published history.

publish=next
basebranch="$1"
if test "$#" = 2
then
	topic="refs/heads/$2"
else
	topic=`git symbolic-ref HEAD` ||
	exit 0 ;# we do not interrupt rebasing detached HEAD
fi

case "$topic" in
refs/heads/??/*)
	;;
*)
	exit 0 ;# we do not interrupt others.
	;;
esac

# Now we are dealing with a topic branch being rebased
# on top of master.  Is it OK to rebase it?

# Does the topic really exist?
git show-ref -q "$topic" || {
	echo >&2 "No such branch $topic"
	exit 1
}

# Is topic fully merged to master?
not_in_master=`git rev-list --pretty=oneline ^master "$topic"`
if test -z "$not_in_master"
then
	echo >&2 "$topic is fully merged to master; better remove it."
	exit 1 ;# we could allow it, but there is no point.
fi

# Is topic ever merged to next?  If so you should not be rebasing it.
only_next_1=`git rev-list ^master "^$topic" ${publish} | sort`
only_next_2=`git rev-list ^master           ${publish} | sort`
if test "$only_next_1" = "$only_next_2"
then
	not_in_topic=`git rev-list "^$topic" master`
	if test -z "$not_in_topic"
	then
		echo >&2 "$topic is already up to date with master"
		exit 1 ;# we could allow it, but there is no point.
	else
		exit 0
	fi
else
	not_in_next=`git rev-list --pretty=oneline ^${publish} "$topic"`
	/usr/bin/perl -e '
		my $topic = $ARGV[0];
		my $msg = "* $topic has commits already merged to public branch:\n";
		my (%not_in_next) = map {
			/^([0-9a-f]+) /;
			($1 => 1);
		} split(/\n/, $ARGV[1]);
		for my $elem (map {
				/^([0-9a-f]+) (.*)$/;
				[$1 => $2];
			} split(/\n/, $ARGV[2])) {
			if (!exists $not_in_next{$elem->[0]}) {
				if ($msg) {
					print STDERR $msg;
					undef $msg;
				}
				print STDERR " $elem->[1]\n";
			}
		}
	' "$topic" "$not_in_next" "$not_in_master"
	exit 1
fi

<<\DOC_END

This sample hook safeguards topic branches that have been
published from being rewound.

The workflow assumed here is:

 * Once a topic branch forks from "master", "master" is never
   merged into it again (either directly or indirectly).

 * Once a topic branch is fully cooked and merged into "master",
   it is deleted.  If you need to build on top of it to correct
   earlier mistakes, a new topic branch is created by forking at
   the tip of the "master".  This is not strictly necessary, but
   it makes it easier to keep your history simple.

 * Whenever you need to test or publish your changes to topic
   branches, merge them into "next" branch.

The script, being an example, hardcodes the publish branch name
to be "next", but it is trivial to make it configurable via
$GIT_DIR/config mechanism.

With this workflow, you would want to know:

(1) ... if a topic branch has ever been merged to "next".  Young
    topic branches can have stupid mistakes you would rather
    clean up before publishing, and things that have not been
    merged into other branches can be easily rebased without
    affecting other people.  But once it is published, you would
    not want to rewind it.

(2) ... if a topic branch has been fully merged to "master".
    Then you can delete it.  More importantly, you should not
    build on top of it -- other people may already want to
    change things related to the topic as patches against your
    "master", so if you need further changes, it is better to
    fork the topic (perhaps with the same name) afresh from the
    tip of "master".

Let's look at this example:

		   o---o---o---o---o---o---o---o---o---o "next"
		  /       /           /           /
		 /   a---a---b A     /           /
		/   /               /           /
	       /   /   c---c---c---c B         /
	      /   /   /             \         /
	     /   /   /   b---b C     \       /
	    /   /   /   /             \     /
    ---o---o---o---o---o---o---o---o---o---o---o "master"


A, B and C are topic branches.

 * A has one fix since it was merged up to "next".

 * B has finished.  It has been fully merged up to "master" and "next",
   and is ready to be deleted.

 * C has not merged to "next" at all.

We would want to allow C to be rebased, refuse A, and encourage
B to be deleted.

To compute (1):

	git rev-list ^master ^topic next
	git rev-list ^master        next

	if these match, topic has not merged in next at all.

To compute (2):

	git rev-list master..topic

	if this is empty, it is fully merged to "master".

DOC_END

### END OF FILE: ./.git/hooks/pre-rebase.sample ######################################################



### START OF FILE: ./.git/hooks/sendemail-validate.sample ####################################################

#!/bin/sh

# An example hook script to validate a patch (and/or patch series) before
# sending it via email.
#
# The hook should exit with non-zero status after issuing an appropriate
# message if it wants to prevent the email(s) from being sent.
#
# To enable this hook, rename this file to "sendemail-validate".
#
# By default, it will only check that the patch(es) can be applied on top of
# the default upstream branch without conflicts in a secondary worktree. After
# validation (successful or not) of the last patch of a series, the worktree
# will be deleted.
#
# The following config variables can be set to change the default remote and
# remote ref that are used to apply the patches against:
#
#   sendemail.validateRemote (default: origin)
#   sendemail.validateRemoteRef (default: HEAD)
#
# Replace the TODO placeholders with appropriate checks according to your
# needs.

validate_cover_letter () {
	file="$1"
	# TODO: Replace with appropriate checks (e.g. spell checking).
	true
}

validate_patch () {
	file="$1"
	# Ensure that the patch applies without conflicts.
	git am -3 "$file" || return
	# TODO: Replace with appropriate checks for this patch
	# (e.g. checkpatch.pl).
	true
}

validate_series () {
	# TODO: Replace with appropriate checks for the whole series
	# (e.g. quick build, coding style checks, etc.).
	true
}

# main -------------------------------------------------------------------------

if test "$GIT_SENDEMAIL_FILE_COUNTER" = 1
then
	remote=$(git config --default origin --get sendemail.validateRemote) &&
	ref=$(git config --default HEAD --get sendemail.validateRemoteRef) &&
	worktree=$(mktemp --tmpdir -d sendemail-validate.XXXXXXX) &&
	git worktree add -fd --checkout "$worktree" "refs/remotes/$remote/$ref" &&
	git config --replace-all sendemail.validateWorktree "$worktree"
else
	worktree=$(git config --get sendemail.validateWorktree)
fi || {
	echo "sendemail-validate: error: failed to prepare worktree" >&2
	exit 1
}

unset GIT_DIR GIT_WORK_TREE
cd "$worktree" &&

if grep -q "^diff --git " "$1"
then
	validate_patch "$1"
else
	validate_cover_letter "$1"
fi &&

if test "$GIT_SENDEMAIL_FILE_COUNTER" = "$GIT_SENDEMAIL_FILE_TOTAL"
then
	git config --unset-all sendemail.validateWorktree &&
	trap 'git worktree remove -ff "$worktree"' EXIT &&
	validate_series
fi

### END OF FILE: ./.git/hooks/sendemail-validate.sample ######################################################



### START OF FILE: ./.git/hooks/pre-commit.sample ####################################################

#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git commit" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message if
# it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-commit".

if git rev-parse --verify HEAD >/dev/null 2>&1
then
	against=HEAD
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)
fi

# If you want to allow non-ASCII filenames set this variable to true.
allownonascii=$(git config --type=bool hooks.allownonascii)

# Redirect output to stderr.
exec 1>&2

# Cross platform projects tend to avoid non-ASCII filenames; prevent
# them from being added to the repository. We exploit the fact that the
# printable range starts at the space character and ends with tilde.
if [ "$allownonascii" != "true" ] &&
	# Note that the use of brackets around a tr range is ok here, (it's
	# even required, for portability to Solaris 10's /usr/bin/tr), since
	# the square bracket bytes happen to fall in the designated range.
	test $(git diff-index --cached --name-only --diff-filter=A -z $against |
	  LC_ALL=C tr -d '[ -~]\0' | wc -c) != 0
then
	cat <<\EOF
Error: Attempt to add a non-ASCII file name.

This can cause problems if you want to work with people on other platforms.

To be portable it is advisable to rename the file.

If you know what you are doing you can disable this check using:

  git config hooks.allownonascii true
EOF
	exit 1
fi

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against --

### END OF FILE: ./.git/hooks/pre-commit.sample ######################################################



### START OF FILE: ./.git/hooks/applypatch-msg.sample ####################################################

#!/bin/sh
#
# An example hook script to check the commit log message taken by
# applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.  The hook is
# allowed to edit the commit message file.
#
# To enable this hook, rename this file to "applypatch-msg".

. git-sh-setup
commitmsg="$(git rev-parse --git-path hooks/commit-msg)"
test -x "$commitmsg" && exec "$commitmsg" ${1+"$@"}
:

### END OF FILE: ./.git/hooks/applypatch-msg.sample ######################################################



### START OF FILE: ./.git/hooks/fsmonitor-watchman.sample ####################################################

#!/usr/bin/perl

use strict;
use warnings;
use IPC::Open2;

# An example hook script to integrate Watchman
# (https://facebook.github.io/watchman/) with git to speed up detecting
# new and modified files.
#
# The hook is passed a version (currently 2) and last update token
# formatted as a string and outputs to stdout a new update token and
# all files that have been modified since the update token. Paths must
# be relative to the root of the working tree and separated by a single NUL.
#
# To enable this hook, rename this file to "query-watchman" and set
# 'git config core.fsmonitor .git/hooks/query-watchman'
#
my ($version, $last_update_token) = @ARGV;

# Uncomment for debugging
# print STDERR "$0 $version $last_update_token\n";

# Check the hook interface version
if ($version ne 2) {
	die "Unsupported query-fsmonitor hook version '$version'.\n" .
	    "Falling back to scanning...\n";
}

my $git_work_tree = get_working_dir();

my $retry = 1;

my $json_pkg;
eval {
	require JSON::XS;
	$json_pkg = "JSON::XS";
	1;
} or do {
	require JSON::PP;
	$json_pkg = "JSON::PP";
};

launch_watchman();

sub launch_watchman {
	my $o = watchman_query();
	if (is_work_tree_watched($o)) {
		output_result($o->{clock}, @{$o->{files}});
	}
}

sub output_result {
	my ($clockid, @files) = @_;

	# Uncomment for debugging watchman output
	# open (my $fh, ">", ".git/watchman-output.out");
	# binmode $fh, ":utf8";
	# print $fh "$clockid\n@files\n";
	# close $fh;

	binmode STDOUT, ":utf8";
	print $clockid;
	print "\0";
	local $, = "\0";
	print @files;
}

sub watchman_clock {
	my $response = qx/watchman clock "$git_work_tree"/;
	die "Failed to get clock id on '$git_work_tree'.\n" .
		"Falling back to scanning...\n" if $? != 0;

	return $json_pkg->new->utf8->decode($response);
}

sub watchman_query {
	my $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'watchman -j --no-pretty')
	or die "open2() failed: $!\n" .
	"Falling back to scanning...\n";

	# In the query expression below we're asking for names of files that
	# changed since $last_update_token but not from the .git folder.
	#
	# To accomplish this, we're using the "since" generator to use the
	# recency index to select candidate nodes and "fields" to limit the
	# output to file names only. Then we're using the "expression" term to
	# further constrain the results.
	my $last_update_line = "";
	if (substr($last_update_token, 0, 1) eq "c") {
		$last_update_token = "\"$last_update_token\"";
		$last_update_line = qq[\n"since": $last_update_token,];
	}
	my $query = <<"	END";
		["query", "$git_work_tree", {$last_update_line
			"fields": ["name"],
			"expression": ["not", ["dirname", ".git"]]
		}]
	END

	# Uncomment for debugging the watchman query
	# open (my $fh, ">", ".git/watchman-query.json");
	# print $fh $query;
	# close $fh;

	print CHLD_IN $query;
	close CHLD_IN;
	my $response = do {local $/; <CHLD_OUT>};

	# Uncomment for debugging the watch response
	# open ($fh, ">", ".git/watchman-response.json");
	# print $fh $response;
	# close $fh;

	die "Watchman: command returned no output.\n" .
	"Falling back to scanning...\n" if $response eq "";
	die "Watchman: command returned invalid output: $response\n" .
	"Falling back to scanning...\n" unless $response =~ /^\{/;

	return $json_pkg->new->utf8->decode($response);
}

sub is_work_tree_watched {
	my ($output) = @_;
	my $error = $output->{error};
	if ($retry > 0 and $error and $error =~ m/unable to resolve root .* directory (.*) is not watched/) {
		$retry--;
		my $response = qx/watchman watch "$git_work_tree"/;
		die "Failed to make watchman watch '$git_work_tree'.\n" .
		    "Falling back to scanning...\n" if $? != 0;
		$output = $json_pkg->new->utf8->decode($response);
		$error = $output->{error};
		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		# Uncomment for debugging watchman output
		# open (my $fh, ">", ".git/watchman-output.out");
		# close $fh;

		# Watchman will always return all files on the first query so
		# return the fast "everything is dirty" flag to git and do the
		# Watchman query just to get it over with now so we won't pay
		# the cost in git to look up each individual file.
		my $o = watchman_clock();
		$error = $output->{error};

		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		output_result($o->{clock}, ("/"));
		$last_update_token = $o->{clock};

		eval { launch_watchman() };
		return 0;
	}

	die "Watchman: $error.\n" .
	"Falling back to scanning...\n" if $error;

	return 1;
}

sub get_working_dir {
	my $working_dir;
	if ($^O =~ 'msys' || $^O =~ 'cygwin') {
		$working_dir = Win32::GetCwd();
		$working_dir =~ tr/\\/\//;
	} else {
		require Cwd;
		$working_dir = Cwd::cwd();
	}

	return $working_dir;
}

### END OF FILE: ./.git/hooks/fsmonitor-watchman.sample ######################################################



### START OF FILE: ./.git/hooks/pre-receive.sample ####################################################

#!/bin/sh
#
# An example hook script to make use of push options.
# The example simply echoes all push options that start with 'echoback='
# and rejects all pushes when the "reject" push option is used.
#
# To enable this hook, rename this file to "pre-receive".

if test -n "$GIT_PUSH_OPTION_COUNT"
then
	i=0
	while test "$i" -lt "$GIT_PUSH_OPTION_COUNT"
	do
		eval "value=\$GIT_PUSH_OPTION_$i"
		case "$value" in
		echoback=*)
			echo "echo from the pre-receive-hook: ${value#*=}" >&2
			;;
		reject)
			exit 1
		esac
		i=$((i + 1))
	done
fi

### END OF FILE: ./.git/hooks/pre-receive.sample ######################################################



### START OF FILE: ./.git/hooks/prepare-commit-msg.sample ####################################################

#!/bin/sh
#
# An example hook script to prepare the commit log message.
# Called by "git commit" with the name of the file that has the
# commit message, followed by the description of the commit
# message's source.  The hook's purpose is to edit the commit
# message file.  If the hook fails with a non-zero status,
# the commit is aborted.
#
# To enable this hook, rename this file to "prepare-commit-msg".

# This hook includes three examples. The first one removes the
# "# Please enter the commit message..." help message.
#
# The second includes the output of "git diff --name-status -r"
# into the message, just before the "git status" output.  It is
# commented because it doesn't cope with --amend or with squashed
# commits.
#
# The third example adds a Signed-off-by line to the message, that can
# still be edited.  This is rarely a good idea.

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

/usr/bin/perl -i.bak -ne 'print unless(m/^. Please enter the commit message/..m/^#$/)' "$COMMIT_MSG_FILE"

# case "$COMMIT_SOURCE,$SHA1" in
#  ,|template,)
#    /usr/bin/perl -i.bak -pe '
#       print "\n" . `git diff --cached --name-status -r`
# 	 if /^#/ && $first++ == 0' "$COMMIT_MSG_FILE" ;;
#  *) ;;
# esac

# SOB=$(git var GIT_COMMITTER_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# git interpret-trailers --in-place --trailer "$SOB" "$COMMIT_MSG_FILE"
# if test -z "$COMMIT_SOURCE"
# then
#   /usr/bin/perl -i.bak -pe 'print "\n" if !$first_line++' "$COMMIT_MSG_FILE"
# fi

### END OF FILE: ./.git/hooks/prepare-commit-msg.sample ######################################################



### START OF FILE: ./.git/hooks/post-update.sample ####################################################

#!/bin/sh
#
# An example hook script to prepare a packed repository for use over
# dumb transports.
#
# To enable this hook, rename this file to "post-update".

exec git update-server-info

### END OF FILE: ./.git/hooks/post-update.sample ######################################################



### START OF FILE: ./.git/hooks/pre-merge-commit.sample ####################################################

#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git merge" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message to
# stderr if it wants to stop the merge commit.
#
# To enable this hook, rename this file to "pre-merge-commit".

. git-sh-setup
test -x "$GIT_DIR/hooks/pre-commit" &&
        exec "$GIT_DIR/hooks/pre-commit"
:

### END OF FILE: ./.git/hooks/pre-merge-commit.sample ######################################################



### START OF FILE: ./.git/hooks/pre-applypatch.sample ####################################################

#!/bin/sh
#
# An example hook script to verify what is about to be committed
# by applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-applypatch".

. git-sh-setup
precommit="$(git rev-parse --git-path hooks/pre-commit)"
test -x "$precommit" && exec "$precommit" ${1+"$@"}
:

### END OF FILE: ./.git/hooks/pre-applypatch.sample ######################################################



### START OF FILE: ./.git/hooks/pre-push.sample ####################################################

#!/bin/sh

# An example hook script to verify what is about to be pushed.  Called by "git
# push" after it has checked the remote status, but before anything has been
# pushed.  If this script exits with a non-zero status nothing will be pushed.
#
# This hook is called with the following parameters:
#
# $1 -- Name of the remote to which the push is being done
# $2 -- URL to which the push is being done
#
# If pushing without using a named remote those arguments will be equal.
#
# Information about the commits which are being pushed is supplied as lines to
# the standard input in the form:
#
#   <local ref> <local oid> <remote ref> <remote oid>
#
# This sample shows how to prevent push of commits where the log message starts
# with "WIP" (work in progress).

remote="$1"
url="$2"

zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')

while read local_ref local_oid remote_ref remote_oid
do
	if test "$local_oid" = "$zero"
	then
		# Handle delete
		:
	else
		if test "$remote_oid" = "$zero"
		then
			# New branch, examine all commits
			range="$local_oid"
		else
			# Update to existing branch, examine new commits
			range="$remote_oid..$local_oid"
		fi

		# Check for WIP commit
		commit=$(git rev-list -n 1 --grep '^WIP' "$range")
		if test -n "$commit"
		then
			echo >&2 "Found WIP commit in $local_ref, not pushing"
			exit 1
		fi
	fi
done

exit 0

### END OF FILE: ./.git/hooks/pre-push.sample ######################################################



### START OF FILE: ./.git/hooks/update.sample ####################################################

#!/bin/sh
#
# An example hook script to block unannotated tags from entering.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# To enable this hook, rename this file to "update".
#
# Config
# ------
# hooks.allowunannotated
#   This boolean sets whether unannotated tags will be allowed into the
#   repository.  By default they won't be.
# hooks.allowdeletetag
#   This boolean sets whether deleting tags will be allowed in the
#   repository.  By default they won't be.
# hooks.allowmodifytag
#   This boolean sets whether a tag may be modified after creation. By default
#   it won't be.
# hooks.allowdeletebranch
#   This boolean sets whether deleting branches will be allowed in the
#   repository.  By default they won't be.
# hooks.denycreatebranch
#   This boolean sets whether remotely creating branches will be denied
#   in the repository.  By default this is allowed.
#

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
	echo "Don't run this script from the command line." >&2
	echo " (if you want, you could supply GIT_DIR then run" >&2
	echo "  $0 <ref> <oldrev> <newrev>)" >&2
	exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
	echo "usage: $0 <ref> <oldrev> <newrev>" >&2
	exit 1
fi

# --- Config
allowunannotated=$(git config --type=bool hooks.allowunannotated)
allowdeletebranch=$(git config --type=bool hooks.allowdeletebranch)
denycreatebranch=$(git config --type=bool hooks.denycreatebranch)
allowdeletetag=$(git config --type=bool hooks.allowdeletetag)
allowmodifytag=$(git config --type=bool hooks.allowmodifytag)

# check for no description
projectdesc=$(sed -e '1q' "$GIT_DIR/description")
case "$projectdesc" in
"Unnamed repository"* | "")
	echo "*** Project description file hasn't been set" >&2
	exit 1
	;;
esac

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')
if [ "$newrev" = "$zero" ]; then
	newrev_type=delete
else
	newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
	refs/tags/*,commit)
		# un-annotated tag
		short_refname=${refname##refs/tags/}
		if [ "$allowunannotated" != "true" ]; then
			echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
			echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
			exit 1
		fi
		;;
	refs/tags/*,delete)
		# delete tag
		if [ "$allowdeletetag" != "true" ]; then
			echo "*** Deleting a tag is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/tags/*,tag)
		# annotated tag
		if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
		then
			echo "*** Tag '$refname' already exists." >&2
			echo "*** Modifying a tag is not allowed in this repository." >&2
			exit 1
		fi
		;;
	refs/heads/*,commit)
		# branch
		if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
			echo "*** Creating a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/heads/*,delete)
		# delete branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/remotes/*,commit)
		# tracking branch
		;;
	refs/remotes/*,delete)
		# delete tracking branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a tracking branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	*)
		# Anything else (is there anything else?)
		echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
		exit 1
		;;
esac

# --- Finished
exit 0

### END OF FILE: ./.git/hooks/update.sample ######################################################



### START OF FILE: ./.git/hooks/push-to-checkout.sample ####################################################

#!/bin/sh

# An example hook script to update a checked-out tree on a git push.
#
# This hook is invoked by git-receive-pack(1) when it reacts to git
# push and updates reference(s) in its repository, and when the push
# tries to update the branch that is currently checked out and the
# receive.denyCurrentBranch configuration variable is set to
# updateInstead.
#
# By default, such a push is refused if the working tree and the index
# of the remote repository has any difference from the currently
# checked out commit; when both the working tree and the index match
# the current commit, they are updated to match the newly pushed tip
# of the branch. This hook is to be used to override the default
# behaviour; however the code below reimplements the default behaviour
# as a starting point for convenient modification.
#
# The hook receives the commit with which the tip of the current
# branch is going to be updated:
commit=$1

# It can exit with a non-zero status to refuse the push (when it does
# so, it must not modify the index or the working tree).
die () {
	echo >&2 "$*"
	exit 1
}

# Or it can make any necessary changes to the working tree and to the
# index to bring them to the desired state when the tip of the current
# branch is updated to the new commit, and exit with a zero status.
#
# For example, the hook can simply run git read-tree -u -m HEAD "$1"
# in order to emulate git fetch that is run in the reverse direction
# with git push, as the two-tree form of git read-tree -u -m is
# essentially the same as git switch or git checkout that switches
# branches while keeping the local changes in the working tree that do
# not interfere with the difference between the branches.

# The below is a more-or-less exact translation to shell of the C code
# for the default behaviour for git's push-to-checkout hook defined in
# the push_to_deploy() function in builtin/receive-pack.c.
#
# Note that the hook will be executed from the repository directory,
# not from the working tree, so if you want to perform operations on
# the working tree, you will have to adapt your code accordingly, e.g.
# by adding "cd .." or using relative paths.

if ! git update-index -q --ignore-submodules --refresh
then
	die "Up-to-date check failed"
fi

if ! git diff-files --quiet --ignore-submodules --
then
	die "Working directory has unstaged changes"
fi

# This is a rough translation of:
#
#   head_has_history() ? "HEAD" : EMPTY_TREE_SHA1_HEX
if git cat-file -e HEAD 2>/dev/null
then
	head=HEAD
else
	head=$(git hash-object -t tree --stdin </dev/null)
fi

if ! git diff-index --quiet --cached --ignore-submodules $head --
then
	die "Working directory has staged changes"
fi

if ! git read-tree -u -m "$commit"
then
	die "Could not update working tree to new HEAD"
fi

### END OF FILE: ./.git/hooks/push-to-checkout.sample ######################################################



### START OF FILE: ./.git/refs/heads/main ####################################################

4628e0bb26441d82cde48d01766d8bf29e2ad8ac

### END OF FILE: ./.git/refs/heads/main ######################################################



### START OF FILE: ./.git/refs/remotes/origin/HEAD ####################################################

ref: refs/remotes/origin/main

### END OF FILE: ./.git/refs/remotes/origin/HEAD ######################################################



### START OF FILE: ./.git/refs/remotes/origin/main ####################################################

4628e0bb26441d82cde48d01766d8bf29e2ad8ac

### END OF FILE: ./.git/refs/remotes/origin/main ######################################################



### BINARY FILE SKIPPED: ./.git/index ###


### START OF FILE: ./.git/COMMIT_EDITMSG ####################################################

update

### END OF FILE: ./.git/COMMIT_EDITMSG ######################################################



### START OF FILE: ./.git/FETCH_HEAD ####################################################

4628e0bb26441d82cde48d01766d8bf29e2ad8ac		branch 'main' of https://github.com/missionode/catering-app

### END OF FILE: ./.git/FETCH_HEAD ######################################################



### BINARY FILE SKIPPED: ./assets/.DS_Store ###


### START OF FILE: ./assets/css/style.css ####################################################

/* For any custom CSS that can't be handled by Tailwind */
body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

### END OF FILE: ./assets/css/style.css ######################################################



### START OF FILE: ./assets/css/print.css ####################################################

/* This stylesheet is only applied when printing */
@media print {
    body {
        font-family: sans-serif;
        color: #000;
    }

    /* Hide all non-essential UI elements */
    #sidebar,
    header,
    #sidebar-overlay,
    #add-dish-modal,
    #add-dish-button,
    #save-event-button,
    #print-button,
    .remove-dish-btn,
    #client-search-results,
    #date-warning,
    #web-event-details { /* Hide the original event details form */
        display: none !important;
    }
    
    .print-only {
        display: block !important;
    }

    /* Reset the layout for a simple, single-column print view */
    #app-wrapper {
        display: block;
    }

    main {
        padding: 0 !important;
        margin: 0 !important;
    }
    
    /* Remove shadows and backgrounds, and add simple borders for clarity */
    .bg-white, .rounded-xl, .shadow-sm {
        background: transparent !important;
        box-shadow: none !important;
        border: 1px solid #ddd !important;
        padding: 1rem !important;
        margin-bottom: 1.5rem !important;
        page-break-inside: avoid; /* Prevents main sections from splitting across pages */
    }

    #menu-items-container > div {
        page-break-inside: avoid;
    }
    
    #page-title {
        display: none !important;
    }
    
    input, select {
        border: none !important;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        padding: 0 !important;
        font-size: 11pt;
        font-family: sans-serif;
    }
    
    #client-search {
        font-weight: bold;
    }
    
    .menu-qty-input {
        display: none;
    }
    .flex.items-center.gap-2 > label {
        display: none;
    }
    .flex.items-center.gap-2::after {
        content: ' (Quantity: ' attr(data-quantity) ')';
        font-size: 10pt;
        color: #555;
    }

    /* Invoice Header Styles */
    .print-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #333;
    }
    .print-header .logo-mark {
        font-size: 2.5rem;
        font-weight: bold;
        background-color: #333;
        color: #fff;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
    }
    .print-header .company-details {
        text-align: right;
    }
    .print-header h2 {
        margin: 0;
        font-size: 1.5rem;
    }
    .print-header p {
        margin: 0;
        font-size: 0.9rem;
    }
}

### END OF FILE: ./assets/css/print.css ######################################################



### START OF FILE: ./assets/js/ui.js ####################################################

export function renderTable(headers, data, renderRow) {
    if (data.length === 0) {
        return '<p class="text-slate-500 text-center py-8">No items found.</p>';
    }

    const headerHTML = headers.map(h => `<th class="p-4 text-left font-semibold text-slate-600">${h}</th>`).join('');
    const bodyHTML = data.map(renderRow).join('');

    return `
        <table class="w-full text-sm">
            <thead class="bg-slate-100 rounded-t-lg">
                <tr>${headerHTML}</tr>
            </thead>
            <tbody>
                ${bodyHTML}
            </tbody>
        </table>
    `;
}

### END OF FILE: ./assets/js/ui.js ######################################################



### BINARY FILE SKIPPED: ./assets/js/.DS_Store ###


### START OF FILE: ./assets/js/file-system.js ####################################################

const DB_NAME = 'CateringAppDB';
const STORE_NAME = 'FileSystemHandles';
const FILE_HANDLE_KEY = 'autoSaveFileHandle';

function openDB() {
    return new Promise((resolve, reject) => {
        const request = indexedDB.open(DB_NAME, 1);
        request.onupgradeneeded = () => {
            request.result.createObjectStore(STORE_NAME);
        };
        request.onsuccess = () => resolve(request.result);
        request.onerror = () => reject(request.error);
    });
}

export async function saveFileHandle(handle) {
    const db = await openDB();
    return new Promise((resolve, reject) => {
        const tx = db.transaction(STORE_NAME, 'readwrite');
        const store = tx.objectStore(STORE_NAME);
        store.put(handle, FILE_HANDLE_KEY);
        tx.oncomplete = () => resolve();
        tx.onerror = () => reject(tx.error);
    });
}

export async function loadFileHandle() {
    const db = await openDB();
    return new Promise((resolve, reject) => {
        const tx = db.transaction(STORE_NAME, 'readonly');
        const store = tx.objectStore(STORE_NAME);
        const request = store.get(FILE_HANDLE_KEY);
        tx.oncomplete = () => resolve(request.result);
        tx.onerror = () => reject(tx.error);
    });
}

export async function deleteFileHandle() {
    const db = await openDB();
    return new Promise((resolve, reject) => {
        const tx = db.transaction(STORE_NAME, 'readwrite');
        const store = tx.objectStore(STORE_NAME);
        store.delete(FILE_HANDLE_KEY);
        tx.oncomplete = () => resolve();
        tx.onerror = () => reject(tx.error);
    });
}

/**
 * Checks if permission is already granted, without prompting the user.
 */
export async function checkPermission(fileHandle, withWrite) {
    const options = { mode: withWrite ? 'readwrite' : 'read' };
    return (await fileHandle.queryPermission(options)) === 'granted';
}

/**
 * Verifies permission and requests it if not already granted.
 * Should ONLY be called after a user gesture (e.g., a click).
 */
export async function requestPermission(fileHandle, withWrite) {
    const options = { mode: withWrite ? 'readwrite' : 'read' };
    if ((await fileHandle.queryPermission(options)) === 'granted') {
        return true;
    }
    if ((await fileHandle.requestPermission(options)) === 'granted') {
        return true;
    }
    return false;
}

export async function writeFile(fileHandle, contents) {
    const writable = await fileHandle.createWritable();
    await writable.write(contents);
    await writable.close();
}

### END OF FILE: ./assets/js/file-system.js ######################################################



### START OF FILE: ./assets/js/pages/events.js ####################################################

import * as storage from '../storage.js';
import { renderTable } from '../ui.js';

let currentEventMenu = [];
let eventId = null;
let pageContent = null; 

const STATUS_OPTIONS = ['Tentative', 'Confirmed', 'Completed', 'Cancelled'];
const STATUS_COLORS = {
    'Tentative': 'bg-yellow-100 text-yellow-800',
    'Confirmed': 'bg-sky-100 text-sky-800',
    'Completed': 'bg-emerald-100 text-emerald-800',
    'Cancelled': 'bg-slate-100 text-slate-800'
};


export function init(content) {
    pageContent = content; 
    const isDetailPage = window.location.pathname.includes('event-detail.html');
    if (isDetailPage) {
        initEventDetailPage(pageContent.eventDetail);
    } else {
        initEventsListPage(pageContent.events);
    }
}

// --- LIST PAGE LOGIC ---

function initEventsListPage(content) {
    document.getElementById('page-title').textContent = content.title;
    document.getElementById('add-new-button').textContent = content.addNew;
    document.getElementById('sub-title').textContent = content.allEvents;
    
    document.getElementById('search-events').addEventListener('input', renderEventsTable);
    document.getElementById('filter-status').addEventListener('change', renderEventsTable);
    document.getElementById('filter-date').addEventListener('input', renderEventsTable);
    document.getElementById('filter-uncollected').addEventListener('change', renderEventsTable);
    document.getElementById('events-table-container').addEventListener('click', handleTableClick);
    document.getElementById('status-options-list').addEventListener('click', handleStatusChange);

    renderEventsTable();
}

function renderEventsTable() {
    const searchTerm = document.getElementById('search-events').value.toLowerCase();
    const filterStatus = document.getElementById('filter-status').value;
    const filterDate = document.getElementById('filter-date').value;
    const filterUncollected = document.getElementById('filter-uncollected').checked;

    let allEvents = storage.getEvents();

    const now = new Date();
    const pastEvents = allEvents.filter(event => new Date(event.date) < now);
    const futureEvents = allEvents.filter(event => new Date(event.date) >= now);

    pastEvents.sort((a, b) => new Date(b.date) - new Date(a.date));
    futureEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
    
    const sortedEvents = [...futureEvents, ...pastEvents];

    let filteredEvents = sortedEvents;

    if (filterStatus !== 'all') {
        filteredEvents = filteredEvents.filter(e => e.status === filterStatus);
    }
    if (filterDate) {
        const selectedDateStr = new Date(filterDate).toDateString();
        filteredEvents = filteredEvents.filter(e => {
            if (!e.date) return false;
            const eventDate = new Date(e.date);
            const eventDateLocalStr = new Date(eventDate.getTime() + (eventDate.getTimezoneOffset() * 60000)).toDateString();
            return eventDateLocalStr === selectedDateStr;
        });
    }
    if (filterUncollected) {
        filteredEvents = filteredEvents.filter(e => !e.paymentCollected);
    }
    if (searchTerm) {
        const clients = storage.getClients();
        filteredEvents = filteredEvents.filter(event => {
            const client = clients.find(c => c.id === event.clientId);
            const clientName = client ? client.name.toLowerCase() : '';
            const venue = event.venue ? event.venue.toLowerCase() : '';
            return clientName.includes(searchTerm) || venue.includes(searchTerm);
        });
    }

    const headers = ['Client', 'Date', 'Venue', 'Guests', 'Status', 'Payment', 'Actions'];
    const tableHTML = renderTable(headers, filteredEvents, (event) => {
        const client = storage.getClients().find(c => c.id === event.clientId);
        
        const today = new Date();
        const eventDate = event.date ? new Date(event.date) : null;
        const isToday = eventDate && eventDate.toDateString() === today.toDateString();
        const highlightClass = isToday ? 'bg-sky-50 border-l-4 border-sky-400' : '';
        const statusColor = STATUS_COLORS[event.status] || 'bg-slate-100 text-slate-800';
        const paymentStatusHTML = event.paymentCollected
            ? `<span class="font-medium text-emerald-600">Collected</span>`
            : `<span class="font-medium text-amber-600">Pending</span>`;

        return `
        <tr class="border-b border-slate-100 hover:bg-slate-50 cursor-pointer ${highlightClass}" data-id="${event.id}">
            <td class="p-4 font-medium">${client ? client.name : 'N/A'}</td>
            <td class="p-4 text-slate-600">${event.date ? new Date(event.date).toLocaleString() : 'N/A'}</td>
            <td class="p-4 text-slate-600">${event.venue || 'N/A'}</td>
            <td class="p-4 text-slate-600 text-center">${event.guestCount || 'N/A'}</td>
            <td class="p-4">
                <span data-id="${event.id}" class="status-badge px-2 py-1 text-xs font-medium rounded-full cursor-pointer transition-transform hover:scale-105 ${statusColor}">
                    ${event.status || 'N/A'}
                </span>
            </td>
            <td class="p-4 text-sm">${paymentStatusHTML}</td>
            <td class="p-4 space-x-4">
                <a href="event-detail.html?id=${event.id}" class="edit-btn text-indigo-600 hover:underline">Edit</a>
                <button data-id="${event.id}" class="delete-btn text-red-600 hover:underline">Delete</button>
            </td>
        </tr>
    `});
    document.getElementById('events-table-container').innerHTML = tableHTML;
}

function handleTableClick(e) {
    const target = e.target;
    
    if (target.closest('.status-badge')) {
        const badge = target.closest('.status-badge');
        openStatusPopover(badge.dataset.id, badge);
        return;
    }

    if (target.closest('.delete-btn')) {
        const idToDelete = target.closest('.delete-btn').dataset.id;
        if (confirm('Are you sure you want to delete this event?')) {
            storage.deleteEvent(idToDelete);
            renderEventsTable();
        }
        return; 
    }

    if (target.closest('.edit-btn')) {
        return;
    }

    const row = target.closest('tr');
    const eventId = row?.dataset.id;
    if (eventId) {
        window.location.href = `event-detail.html?id=${eventId}`;
    }
}

function openStatusPopover(eventId, targetElement) {
    const popover = document.getElementById('status-popover');
    const list = document.getElementById('status-options-list');

    list.innerHTML = STATUS_OPTIONS.map(status => `
        <li data-event-id="${eventId}" data-status="${status}" class="px-3 py-2 hover:bg-slate-100 rounded-md cursor-pointer">${status}</li>
    `).join('');

    const rect = targetElement.getBoundingClientRect();
    popover.style.top = `${rect.bottom + window.scrollY + 5}px`;
    popover.style.left = `${rect.left + window.scrollX}px`;
    popover.classList.remove('hidden');

    setTimeout(() => {
        document.addEventListener('click', closeStatusPopover, { once: true });
    }, 0);
}

function closeStatusPopover() {
    document.getElementById('status-popover').classList.add('hidden');
}

function handleStatusChange(e) {
    const target = e.target.closest('li');
    if (!target) return;

    const { eventId, status: newStatus } = target.dataset;
    const event = storage.getEventById(eventId);

    if (event && event.status !== newStatus) {
        const confirmationMessage = `Are you sure you want to change the status from "${event.status}" to "${newStatus}"?`;
        if (confirm(confirmationMessage)) {
            event.status = newStatus;
            storage.saveEvent(event);
            renderEventsTable();
        }
    }
    closeStatusPopover();
}


// --- DETAIL PAGE LOGIC ---

function initEventDetailPage(content) {
    // Explicitly set text content for each element to be more robust
    document.getElementById('page-title').textContent = content.createTitle;
    document.getElementById('event-details-title').textContent = content.eventDetails;
    document.getElementById('client-name-label').textContent = content.clientName;
    document.getElementById('event-date-label').textContent = content.eventDate;
    document.getElementById('venue-label').textContent = content.venue;
    document.getElementById('guest-count-label').textContent = content.guestCount;
    document.getElementById('status-label').textContent = content.status;
    document.getElementById('menu-builder-title').textContent = content.menuBuilder;
    document.getElementById('add-dish-button').textContent = content.addDish;
    document.getElementById('total-cost-label').textContent = content.totalCost;
    document.getElementById('advance-paid-label').textContent = content.advancePaid;
    document.getElementById('balance-payable-label').textContent = content.balancePayable;
    document.getElementById('save-event-button').textContent = content.saveEvent;
    
    initClientSearch();
    
    const urlParams = new URLSearchParams(window.location.search);
    eventId = urlParams.get('id');

    if (eventId) {
        document.getElementById('page-title').textContent = content.editTitle;
        const eventData = storage.getEventById(eventId);
        if (eventData) {
            populateForm(eventData);
            currentEventMenu = eventData.menu || [];
        }
    } else {
        updateFinancials();
    }

    renderEventMenu();
    setupEventListeners();
    populatePrintHeader();
}

function setupEventListeners() {
    document.getElementById('event-form').addEventListener('submit', (e) => {
        e.preventDefault();
        saveEventForm();
    });
    
    document.getElementById('print-button').addEventListener('click', () => {
        populatePrintHeader();
        window.print();
    });
    
    document.getElementById('advance-paid').addEventListener('input', updateFinancials);
    document.getElementById('discount').addEventListener('input', updateFinancials);

    document.getElementById('add-dish-button').addEventListener('click', openAddDishModal);
    document.getElementById('modal-close-button').addEventListener('click', closeAddDishModal);
    document.getElementById('modal-add-dishes-button').addEventListener('click', addSelectedDishesToMenu);
    document.getElementById('menu-items-container').addEventListener('input', handleMenuQuantityChange);
    document.getElementById('menu-items-container').addEventListener('click', handleRemoveDishClick);
    document.getElementById('guest-count').addEventListener('input', handleGuestCountChange);
    document.getElementById('client-id').addEventListener('change', checkForConcurrentBookings);
    document.getElementById('event-date').addEventListener('change', checkForConcurrentBookings);
}

function populateForm(event) {
    document.getElementById('client-id').value = event.clientId || '';
    if (event.clientId) {
        const client = storage.getClients().find(c => c.id === event.clientId);
        if(client) document.getElementById('client-search').value = client.name;
    }
    if (event.date) {
        const d = new Date(event.date);
        const formattedDate = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}T${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;
        document.getElementById('event-date').value = formattedDate;
    }
    document.getElementById('venue').value = event.venue || '';
    document.getElementById('guest-count').value = event.guestCount || '';
    document.getElementById('status').value = event.status || 'Tentative';
    document.getElementById('advance-paid').value = event.advancePaid || 0;
    document.getElementById('discount').value = event.discount || 0;
    document.getElementById('payment-collected').checked = event.paymentCollected || false;
    checkForConcurrentBookings();
}

function saveEventForm() {
    const clientId = document.getElementById('client-id').value;
    const eventDateStr = document.getElementById('event-date').value;
    const venue = document.getElementById('venue').value;
    const guestCount = document.getElementById('guest-count').value;

    if (!clientId || !eventDateStr || !venue || !guestCount) {
        alert('Please fill out all required fields: Client, Date, Venue, and Guest Count.');
        return;
    }

    const eventDate = new Date(eventDateStr);
    const now = new Date();

    if (eventDate < now && !eventId) {
        alert('You cannot create an event in the past. Please select a future date and time.');
        return;
    }

    const eventData = {
        id: eventId,
        clientId: clientId,
        date: eventDateStr,
        venue: venue,
        guestCount: guestCount,
        status: document.getElementById('status').value,
        menu: currentEventMenu,
        advancePaid: parseFloat(document.getElementById('advance-paid').value) || 0,
        discount: parseFloat(document.getElementById('discount').value) || 0,
        paymentCollected: document.getElementById('payment-collected').checked,
    };

    storage.saveEvent(eventData);
    alert('Event saved successfully!');
    window.location.href = 'events.html';
}

function initClientSearch() {
    const searchInput = document.getElementById('client-search');
    const resultsContainer = document.getElementById('client-search-results');
    const hiddenInput = document.getElementById('client-id');
    const allClients = storage.getClients();

    searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.toLowerCase();
        if (!searchTerm) {
            resultsContainer.innerHTML = '';
            resultsContainer.classList.add('hidden');
            return;
        }
        const filteredClients = allClients.filter(client => client.name.toLowerCase().includes(searchTerm));
        resultsContainer.innerHTML = filteredClients.map(client => 
            `<div class="p-2 hover:bg-indigo-100 cursor-pointer" data-id="${client.id}" data-name="${client.name}">${client.name}</div>`
        ).join('');
        resultsContainer.classList.remove('hidden');
    });

    resultsContainer.addEventListener('click', (e) => {
        if (e.target && e.target.matches('div[data-id]')) {
            hiddenInput.value = e.target.dataset.id;
            searchInput.value = e.target.dataset.name;
            resultsContainer.classList.add('hidden');
            hiddenInput.dispatchEvent(new Event('change'));
        }
    });

    document.addEventListener('click', (e) => {
        if (!searchInput.contains(e.target) && !resultsContainer.contains(e.target)) {
            resultsContainer.classList.add('hidden');
        }
    });
}

function checkForConcurrentBookings() {
    const clientId = document.getElementById('client-id').value;
    const eventDateStr = document.getElementById('event-date').value;
    const warningEl = document.getElementById('date-warning');
    warningEl.textContent = '';

    if (!clientId || !eventDateStr) return;

    const currentEventDate = new Date(eventDateStr).toDateString();
    const otherEvents = storage.getEvents().filter(e => e.id !== eventId);
    
    const conflict = otherEvents.find(e => 
        e.clientId === clientId && new Date(e.date).toDateString() === currentEventDate
    );

    if (conflict) {
        warningEl.textContent = 'Warning: Client has another booking on this day.';
    }
}

function renderEventMenu() {
    const container = document.getElementById('menu-items-container');
    const dishLibrary = storage.getDishes();
    
    if (currentEventMenu.length === 0) {
        container.innerHTML = '<p class="text-slate-500">No dishes added to this event menu yet.</p>';
    } else {
        container.innerHTML = currentEventMenu.map(menuItem => {
            const dishDetails = dishLibrary.find(d => d.id === menuItem.dishId);
            if (!dishDetails) return '';
            return `
                <div class="flex items-center gap-4 p-2 bg-slate-50 rounded-lg">
                    <div class="flex-1">
                        <p class="font-medium">${dishDetails.name}</p>
                        <p class="text-sm text-slate-500">₹${Number(dishDetails.price).toFixed(2)} per serving</p>
                    </div>
                    <div class="flex items-center gap-2" data-quantity="${menuItem.quantity}">
                        <label for="qty-${dishDetails.id}" class="text-sm">Qty:</label>
                        <input type="number" data-dish-id="${dishDetails.id}" value="${menuItem.quantity}" min="1" class="menu-qty-input w-20 rounded-md border-slate-300 shadow-sm text-sm">
                    </div>
                    <button type="button" data-dish-id="${dishDetails.id}" class="remove-dish-btn text-red-500 hover:text-red-700 text-2xl font-bold leading-none p-1">&times;</button>
                </div>
            `;
        }).join('');
    }
    calculateTotalCost();
}

function calculateTotalCost() {
    const dishLibrary = storage.getDishes();
    let total = 0;
    currentEventMenu.forEach(menuItem => {
        const dishDetails = dishLibrary.find(d => d.id === menuItem.dishId);
        if (dishDetails) {
            total += dishDetails.price * menuItem.quantity;
        }
    });
    document.getElementById('total-cost-value').textContent = `₹${total.toFixed(2)}`;
    updateFinancials();
}

function updateFinancials() {
    const totalCostText = document.getElementById('total-cost-value').textContent;
    const totalCost = parseFloat(totalCostText.replace('₹', '')) || 0;
    const advancePaid = parseFloat(document.getElementById('advance-paid').value) || 0;
    const discount = parseFloat(document.getElementById('discount').value) || 0;
    const balance = totalCost - discount - advancePaid;
    document.getElementById('balance-payable-value').textContent = `₹${balance.toFixed(2)}`;
}

function populatePrintHeader() {
    if (!eventId || !pageContent) return;
    const event = storage.getEventById(eventId);
    if (!event) return;
    const client = storage.getClients().find(c => c.id === event.clientId);

    const { appName, companyDetails } = pageContent;

    document.getElementById('print-logo-mark').textContent = appName.charAt(0);
    document.getElementById('print-company-name').textContent = appName;
    document.getElementById('print-company-address').textContent = companyDetails.address;
    document.getElementById('print-company-contact').textContent = `${companyDetails.phone} | ${companyDetails.email}`;

    if (client) {
        document.getElementById('print-client-name').textContent = client.name;
        document.getElementById('print-client-contact').textContent = `${client.phone} | ${client.email}`;
        document.getElementById('print-client-address').textContent = client.address || '';
    }

    document.getElementById('print-event-id').textContent = event.id;
    document.getElementById('print-event-date').textContent = new Date(event.date).toLocaleDateString();
    document.getElementById('print-event-venue').textContent = event.venue || 'N/A';
    document.getElementById('print-event-guests').textContent = event.guestCount || 'N/A';
    document.getElementById('print-event-status').textContent = event.status || 'N/A';
}

function openAddDishModal() {
    const modal = document.getElementById('add-dish-modal');
    const searchInput = document.getElementById('dish-search-input');
    const dishListContainer = document.getElementById('dish-library-list');

    renderDishListInModal();
    
    searchInput.addEventListener('input', renderDishListInModal);
    dishListContainer.addEventListener('change', updateModalEstimate);
    
    updateModalEstimate();
    
    modal.classList.remove('hidden');
    modal.classList.add('flex');
}

function renderDishListInModal() {
    const dishListContainer = document.getElementById('dish-library-list');
    const searchTerm = document.getElementById('dish-search-input').value.toLowerCase();
    
    let allDishes = storage.getDishes();
    if (searchTerm) {
        allDishes = allDishes.filter(dish =>
            dish.name.toLowerCase().includes(searchTerm) ||
            dish.category.toLowerCase().includes(searchTerm)
        );
    }
    
    dishListContainer.innerHTML = allDishes.map(dish => `
        <div class="flex items-center justify-between p-2 rounded-lg hover:bg-slate-100">
            <div>
                <p class="font-medium">${dish.name}</p>
                <p class="text-sm text-slate-500">${dish.category} - ₹${Number(dish.price).toFixed(2)}</p>
            </div>
            <input type="checkbox" data-id="${dish.id}" data-price="${dish.price}" class="dish-select-checkbox h-5 w-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500">
        </div>
    `).join('') || `<p class="text-slate-500">No dishes match your search.</p>`;

    if (allDishes.length === 0 && !searchTerm) {
        dishListContainer.innerHTML = '<p class="text-slate-500">Your dish library is empty. Please add dishes on the "Dish Library" page first.</p>';
    }
}

function closeAddDishModal() {
    const modal = document.getElementById('add-dish-modal');
    const searchInput = document.getElementById('dish-search-input');
    const dishListContainer = document.getElementById('dish-library-list');

    searchInput.removeEventListener('input', renderDishListInModal);
    dishListContainer.removeEventListener('change', updateModalEstimate);

    modal.classList.add('hidden');
    modal.classList.remove('flex');
}

function updateModalEstimate() {
    const guestCount = parseInt(document.getElementById('guest-count').value, 10) || 1;
    const checkedBoxes = document.querySelectorAll('#dish-library-list .dish-select-checkbox:checked');
    let total = 0;
    checkedBoxes.forEach(box => {
        total += parseFloat(box.dataset.price);
    });
    document.getElementById('modal-estimate').textContent = `₹${(total * guestCount).toFixed(2)}`;
}

function addSelectedDishesToMenu() {
    const checkboxes = document.querySelectorAll('#dish-library-list .dish-select-checkbox:checked');
    const guestCount = parseInt(document.getElementById('guest-count').value, 10) || 1;
    checkboxes.forEach(box => {
        const dishId = box.dataset.id;
        if (!currentEventMenu.some(item => item.dishId === dishId)) {
            currentEventMenu.push({ dishId: dishId, quantity: guestCount });
        }
    });
    renderEventMenu();
    closeAddDishModal();
}

function handleMenuQuantityChange(e) {
    if (e.target.classList.contains('menu-qty-input')) {
        const dishId = e.target.dataset.dishId;
        const newQuantity = parseInt(e.target.value, 10) || 1;
        const menuItem = currentEventMenu.find(item => item.dishId === dishId);
        if (menuItem) {
            menuItem.quantity = newQuantity;
        }
        e.target.parentElement.dataset.quantity = newQuantity;
        calculateTotalCost();
    }
}

function handleRemoveDishClick(e) {
    const button = e.target.closest('.remove-dish-btn');
    if (button) {
        const dishId = button.dataset.dishId;
        currentEventMenu = currentEventMenu.filter(item => item.dishId !== dishId);
        renderEventMenu();
    }
}

function handleGuestCountChange(e) {
    if (currentEventMenu.length > 0) {
        if (confirm('Update all dish quantities to match the new guest count?')) {
            const newGuestCount = parseInt(e.target.value, 10) || 1;
            currentEventMenu.forEach(item => {
                item.quantity = newGuestCount;
            });
            renderEventMenu();
        }
    }
}

### END OF FILE: ./assets/js/pages/events.js ######################################################



### START OF FILE: ./assets/js/pages/dishes.js ####################################################

import * as storage from '../storage.js';
import { renderTable } from '../ui.js';

let content;

export function init(pageContent) {
    content = pageContent;
    document.getElementById('page-title').textContent = content.title;
    document.getElementById('add-new-button').textContent = content.addNew;
    document.getElementById('sub-title').textContent = content.allDishes;
    
    setupEventListeners();
    renderDishesTable();
    setupModal();
}

function setupEventListeners() {
    document.getElementById('add-new-button').addEventListener('click', () => openModal());
    document.getElementById('modal-close-button').addEventListener('click', closeModal);
    document.getElementById('dish-modal').addEventListener('click', (e) => {
        if (e.target.id === 'dish-modal') closeModal();
    });
    document.getElementById('dish-form').addEventListener('submit', handleFormSubmit);
    document.getElementById('dishes-list').addEventListener('click', handleTableClick);
}

function setupModal() {
    document.getElementById('dish-name-label').textContent = content.dishName;
    document.getElementById('dish-category-label').textContent = content.category;
    document.getElementById('dish-price-label').textContent = content.price;
    document.getElementById('dish-description-label').textContent = content.description;
    document.getElementById('modal-save-button').textContent = content.saveDish;
    document.getElementById('modal-close-button').textContent = 'Cancel';
}

function renderDishesTable() {
    const dishes = storage.getDishes();
    const headers = ['Name', 'Category', 'Price', 'Actions'];
    
    const tableHTML = renderTable(headers, dishes, (dish) => `
        <tr class="border-b border-slate-100">
            <td class="p-4 font-medium">${dish.name}</td>
            <td class="p-4 text-slate-600">${dish.category}</td>
            <td class="p-4 text-slate-600">₹${Number(dish.price).toFixed(2)}</td>
            <td class="p-4 space-x-4">
                <button data-id="${dish.id}" class="edit-btn text-indigo-600 hover:underline">Edit</button>
                <button data-id="${dish.id}" class="delete-btn text-red-600 hover:underline">Delete</button>
            </td>
        </tr>
    `);
    
    document.getElementById('dishes-list').innerHTML = tableHTML;
}

function handleFormSubmit(e) {
    e.preventDefault();
    const dish = {
        id: document.getElementById('dish-id').value,
        name: document.getElementById('dish-name').value,
        category: document.getElementById('dish-category').value,
        price: document.getElementById('dish-price').value,
        description: document.getElementById('dish-description').value,
    };
    storage.saveDish(dish);
    renderDishesTable();
    closeModal();
}

function handleTableClick(e) {
    const target = e.target;
    const id = target.dataset.id;
    if (!id) return;

    if (target.classList.contains('edit-btn')) {
        const dishes = storage.getDishes();
        const dishToEdit = dishes.find(d => d.id === id);
        if (dishToEdit) openModal(dishToEdit);
    } else if (target.classList.contains('delete-btn')) {
        if (confirm('Are you sure you want to delete this dish?')) {
            storage.deleteDish(id);
            renderDishesTable();
        }
    }
}

function openModal(dish = null) {
    const form = document.getElementById('dish-form');
    form.reset();
    document.getElementById('modal-title').textContent = dish ? 'Edit Dish' : content.addNew;
    if (dish) {
        document.getElementById('dish-id').value = dish.id;
        document.getElementById('dish-name').value = dish.name;
        document.getElementById('dish-category').value = dish.category;
        document.getElementById('dish-price').value = dish.price;
        document.getElementById('dish-description').value = dish.description;
    } else {
        document.getElementById('dish-id').value = '';
    }
    document.getElementById('dish-modal').classList.remove('hidden');
    document.getElementById('dish-modal').classList.add('flex');
}

function closeModal() {
    document.getElementById('dish-modal').classList.add('hidden');
    document.getElementById('dish-modal').classList.remove('flex');
}

### END OF FILE: ./assets/js/pages/dishes.js ######################################################



### START OF FILE: ./assets/js/pages/preferences.js ####################################################

import * as storage from '../storage.js';
import * as fileSystem from '../file-system.js';

let autoSaveHandle = null;

export async function init(content) {
    // Set static text from content.json
    document.getElementById('page-title').textContent = content.title;
    document.getElementById('import-export-title').textContent = content.importExport;
    document.getElementById('import-desc').textContent = content.importDesc;
    document.getElementById('import-button').textContent = content.importButton;
    document.getElementById('export-desc').textContent = content.exportDesc;
    document.getElementById('export-button').textContent = content.exportButton;
    document.getElementById('autosave-title').textContent = content.autoSave;
    document.getElementById('autosave-desc').textContent = content.autoSaveDesc;
    document.getElementById('autosave-button-activate').textContent = content.autoSaveButton;

    setupEventListeners();
    await updateAutoSaveStatus();
}

function setupEventListeners() {
    document.getElementById('export-button').addEventListener('click', handleExport);
    document.getElementById('import-button').addEventListener('click', handleImport);
    document.getElementById('autosave-button-activate').addEventListener('click', activateAutoSave);
    document.getElementById('autosave-button-forget').addEventListener('click', forgetAutoSaveFile);
}

async function updateAutoSaveStatus() {
    autoSaveHandle = await fileSystem.loadFileHandle();
    const activeDiv = document.getElementById('autosave-status-active');
    const inactiveDiv = document.getElementById('autosave-status-inactive');
    
    if (autoSaveHandle) {
        // If a handle exists, always show the active panel.
        activeDiv.classList.remove('hidden');
        inactiveDiv.classList.add('hidden');
        document.getElementById('autosave-filename').textContent = autoSaveHandle.name;
        
        // Then, check for permission and update the status message inside the active panel.
        const permissionStatusEl = document.getElementById('autosave-permission-status');
        const hasPermission = await fileSystem.checkPermission(autoSaveHandle, true);

        if (hasPermission) {
            permissionStatusEl.textContent = 'Status: OK';
            permissionStatusEl.className = 'mt-2 text-sm font-medium text-emerald-600 h-4';
        } else {
            permissionStatusEl.textContent = 'Action Required: Permission is needed to continue auto-saving.';
            permissionStatusEl.className = 'mt-2 text-sm font-medium text-amber-600 h-4';
        }
    } else {
        // No handle exists, show the inactive panel.
        activeDiv.classList.add('hidden');
        inactiveDiv.classList.remove('hidden');
    }
}

async function activateAutoSave() {
    try {
        const handle = await window.showSaveFilePicker({
            suggestedName: `catering-autosave.json`,
            types: [{ description: 'JSON Files', accept: { 'application/json': ['.json'] } }],
        });

        if (await fileSystem.requestPermission(handle, true)) {
            await fileSystem.saveFileHandle(handle);
            alert('Auto-save activated! The app will now periodically save changes to this file.');
            window.isDataDirty = true;
            location.reload(); 
        } else {
            alert('Permission was not granted. Auto-save could not be activated.');
        }

    } catch (err) {
        if (err.name !== 'AbortError') {
            console.error('Error activating auto-save:', err);
            alert('Could not activate auto-save. See console for details.');
        }
    }
}

async function forgetAutoSaveFile() {
    if (confirm('Are you sure you want to disable auto-save? The app will forget this file.')) {
        await fileSystem.deleteFileHandle();
        alert('Auto-save has been disabled.');
        location.reload();
    }
}

async function handleExport() {
    try {
        const handle = await window.showSaveFilePicker({
            suggestedName: `catering-backup-${new Date().toISOString().split('T')[0]}.json`,
            types: [{ description: 'JSON Files', accept: { 'application/json': ['.json'] } }],
        });
        const dataString = JSON.stringify(storage.getData(), null, 2);
        await fileSystem.writeFile(handle, dataString);
        alert('Data exported successfully!');
    } catch (err) {
        if (err.name !== 'AbortError') {
            console.error('Export failed:', err);
            alert('Error exporting data. Check the console for details.');
        }
    }
}

async function handleImport() {
    if (!confirm('This will overwrite all existing data. Are you sure you want to continue?')) {
        return;
    }
    try {
        const [handle] = await window.showOpenFilePicker({
            types: [{ description: 'JSON Files', accept: { 'application/json': ['.json'] } }],
        });
        const file = await handle.getFile();
        const content = await file.text();
        const data = JSON.parse(content);
        
        if (data && typeof data === 'object' && 'dishes' in data && 'clients' in data && 'events' in data) {
            storage.saveData(data);
            alert('Data imported successfully! The page will now reload.');
            window.location.reload();
        } else {
            alert('This does not appear to be a valid backup file.');
        }
    } catch (err) {
        if (err.name !== 'AbortError') {
            console.error('Import failed:', err);
            alert('Error importing data. Check the console for details.');
        }
    }
}

### END OF FILE: ./assets/js/pages/preferences.js ######################################################



### START OF FILE: ./assets/js/pages/help.js ####################################################

export function init(content) {
    const pageTitle = document.getElementById('page-title');
    if (pageTitle && content.title) {
        pageTitle.textContent = content.title;
    }
}

### END OF FILE: ./assets/js/pages/help.js ######################################################



### START OF FILE: ./assets/js/pages/dashboard.js ####################################################

import * as storage from '../storage.js';

const formatCurrency = (amount) => `₹${Number(amount).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;

const ICONS = {
    calendar: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>`,
    revenue: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 11V3m0 8h8m-8 0l-4 4m12 0l-4-4m4 4v8m-12-8h8m-8 0l-4 4m12 0l-4-4m4 4v8"/></svg>`,
    outstanding: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 12h.01M12 12V7m0 5v.01M12 12h.01M12 12V7m0 5h.01M12 12V7m0 5v4m0 0H9m3 0h3m-3 0v-4m0 4H9m3 0h3m-6 0v-4m0 4h3m3 0h3m-3 0v-4m0 4h3m-3 0h3"/></svg>`,
    users: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>`,
};

export function init(content) {
    document.getElementById('page-title').textContent = content.title;
    document.getElementById('welcome-message').textContent = content.welcome;
    
    renderKpiCards();
    renderUpcomingEvents(content.upcomingEvents);
    renderEventStatusChart();
}

function calculateEventTotal(event) {
    if (!event || !event.menu) return 0;
    return event.menu.reduce((menuSum, item) => {
        const dish = storage.getDishes().find(d => d.id === item.dishId);
        return menuSum + (dish ? dish.price * item.quantity : 0);
    }, 0);
}

function renderKpiCards() {
    const events = storage.getEvents();
    const clients = storage.getClients();
    const now = new Date();
    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);

    const upcomingEvents = events.filter(e => new Date(e.date) >= now);
    const upcomingRevenue = upcomingEvents.reduce((sum, event) => sum + calculateEventTotal(event), 0);
    
    const uncollectedEvents = events.filter(e => !e.paymentCollected);
    const outstandingPayments = uncollectedEvents.reduce((sum, event) => {
        const total = calculateEventTotal(event);
        const advance = event.advancePaid || 0;
        const discount = event.discount || 0;
        const balance = total - discount - advance;
        return sum + (balance > 0 ? balance : 0);
    }, 0);

    const newClientsThisMonth = clients.filter(c => c.createdAt && new Date(c.createdAt) >= startOfMonth);

    document.getElementById('kpi-upcoming-events').innerHTML = createKpiCard(ICONS.calendar, upcomingEvents.length, "Upcoming Events");
    document.getElementById('kpi-upcoming-revenue').innerHTML = createKpiCard(ICONS.revenue, formatCurrency(upcomingRevenue), "Est. Upcoming Revenue");
    document.getElementById('kpi-outstanding-payments').innerHTML = createKpiCard(ICONS.outstanding, formatCurrency(outstandingPayments), "Outstanding Payments");
    document.getElementById('kpi-new-clients').innerHTML = createKpiCard(ICONS.users, newClientsThisMonth.length, "New Clients This Month");
}

function renderUpcomingEvents(title) {
    document.getElementById('upcoming-events-title').textContent = `${title} (Next 7 Days)`;
    const now = new Date();
    const oneWeekFromNow = new Date();
    oneWeekFromNow.setDate(now.getDate() + 7);

    const allClients = storage.getClients();
    const events = storage.getEvents()
        .filter(event => {
            if (!event.date) return false;
            const eventDate = new Date(event.date);
            return eventDate >= now && eventDate <= oneWeekFromNow;
        })
        .sort((a, b) => new Date(a.date) - new Date(b.date));

    const container = document.getElementById('upcoming-events-list');
    if (events.length === 0) {
        container.innerHTML = '<div class="bg-white p-6 rounded-xl shadow-sm"><p class="text-slate-500">No upcoming events in the next 7 days.</p></div>';
        return;
    }

    container.innerHTML = events.map(event => {
        const client = allClients.find(c => c.id === event.clientId);
        return `
            <a href="event-detail.html?id=${event.id}" class="block bg-white p-4 rounded-xl shadow-sm hover:shadow-lg transition-shadow">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="font-semibold text-indigo-600">${client ? client.name : 'Unknown Client'}</p>
                        <p class="text-sm text-slate-500">${new Date(event.date).toLocaleString()}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-slate-500">${event.guestCount} Guests</p>
                        <span class="px-2 py-1 text-xs font-medium rounded-full bg-sky-100 text-sky-800">${event.status}</span>
                    </div>
                </div>
            </a>
        `;
    }).join('');
}

function renderEventStatusChart() {
    const events = storage.getEvents();
    const statusCounts = events.reduce((acc, event) => {
        acc[event.status] = (acc[event.status] || 0) + 1;
        return acc;
    }, {});

    const container = document.getElementById('event-status-chart');
    if (events.length === 0) {
        container.innerHTML = `<p class="text-center text-slate-500">No event data for chart.</p>`;
        return;
    }

    const statusColors = {
        'Tentative': 'bg-yellow-400',
        'Confirmed': 'bg-sky-400',
        'Completed': 'bg-emerald-400',
        'Cancelled': 'bg-slate-400'
    };

    container.innerHTML = Object.entries(statusCounts).map(([status, count]) => {
        const percentage = (count / events.length) * 100;
        return `
            <div>
                <div class="flex justify-between items-center mb-1 text-sm">
                    <span class="font-medium text-slate-700">${status}</span>
                    <span class="text-slate-500">${count}</span>
                </div>
                <div class="w-full bg-slate-200 rounded-full h-2.5">
                    <div class="${statusColors[status] || 'bg-gray-400'} h-2.5 rounded-full" style="width: ${percentage}%"></div>
                </div>
            </div>
        `;
    }).join('');
}

function createKpiCard(icon, value, label) {
    return `
        ${icon}
        <div>
            <p class="text-2xl font-bold text-slate-900">${value}</p>
            <p class="text-sm font-medium text-slate-500">${label}</p>
        </div>
    `;
}

### END OF FILE: ./assets/js/pages/dashboard.js ######################################################



### START OF FILE: ./assets/js/pages/clients.js ####################################################

import * as storage from '../storage.js';
import { renderTable } from '../ui.js';

let content;

export function init(pageContent) {
    content = pageContent;
    document.getElementById('page-title').textContent = content.title;
    document.getElementById('add-new-button').textContent = content.addNew;
    document.getElementById('sub-title').textContent = content.allClients;

    setupEventListeners();
    renderClientsTable();
    setupModal();
}

function setupEventListeners() {
    document.getElementById('add-new-button').addEventListener('click', () => openModal());
    document.getElementById('modal-close-button').addEventListener('click', closeModal);
    document.getElementById('client-modal').addEventListener('click', (e) => { if (e.target.id === 'client-modal') closeModal(); });
    document.getElementById('client-form').addEventListener('submit', handleFormSubmit);
    document.getElementById('clients-list').addEventListener('click', handleTableClick);
}

function renderClientsTable() {
    const clients = storage.getClients();
    const headers = ['Name', 'Contact', 'Address', 'Actions'];

    const tableHTML = renderTable(headers, clients, (client) => `
        <tr class="border-b border-slate-100">
            <td class="p-4 font-medium">${client.name}</td>
            <td class="p-4 text-slate-600 text-sm">
                <div>${client.email}</div>
                <div>${client.phone}</div>
            </td>
            <td class="p-4 text-slate-600 text-sm">${client.address || ''}</td>
            <td class="p-4 space-x-4">
                <button data-id="${client.id}" class="edit-btn text-indigo-600 hover:underline">Edit</button>
                <button data-id="${client.id}" class="delete-btn text-red-600 hover:underline">Delete</button>
            </td>
        </tr>
    `);
    
    document.getElementById('clients-list').innerHTML = tableHTML;
}

function setupModal() {
    document.getElementById('client-name-label').textContent = content.name;
    document.getElementById('client-email-label').textContent = content.email;
    document.getElementById('client-phone-label').textContent = content.phone;
    document.getElementById('client-address-label').textContent = content.address;
}

function handleFormSubmit(e) {
    e.preventDefault();
    const client = {
        id: document.getElementById('client-id').value,
        name: document.getElementById('client-name').value,
        email: document.getElementById('client-email').value,
        phone: document.getElementById('client-phone').value,
        address: document.getElementById('client-address').value,
    };
    storage.saveClient(client);
    renderClientsTable();
    closeModal();
}

function handleTableClick(e) {
    const target = e.target;
    const id = target.dataset.id;
    if (!id) return;

    if (target.classList.contains('edit-btn')) {
        const clients = storage.getClients();
        const clientToEdit = clients.find(c => c.id === id);
        if (clientToEdit) openModal(clientToEdit);
    } else if (target.classList.contains('delete-btn')) {
        if (confirm('Are you sure you want to delete this client? This might affect existing events.')) {
            storage.deleteClient(id);
            renderClientsTable();
        }
    }
}

function openModal(client = null) {
    const form = document.getElementById('client-form');
    form.reset();
    document.getElementById('modal-title').textContent = client ? 'Edit Client' : content.addNew;
    if (client) {
        document.getElementById('client-id').value = client.id;
        document.getElementById('client-name').value = client.name;
        document.getElementById('client-email').value = client.email;
        document.getElementById('client-phone').value = client.phone;
        document.getElementById('client-address').value = client.address || '';
    } else {
        document.getElementById('client-id').value = '';
    }
    document.getElementById('client-modal').classList.remove('hidden');
    document.getElementById('client-modal').classList.add('flex');
}

function closeModal() {
    document.getElementById('client-modal').classList.add('hidden');
    document.getElementById('client-modal').classList.remove('flex');
}

### END OF FILE: ./assets/js/pages/clients.js ######################################################



### START OF FILE: ./assets/js/app.js ####################################################

import * as storage from './storage.js';
import * as fileSystem from './file-system.js';

const content = {};
let autoSaveInterval = null;

const routes = {
    '/index.html': 'dashboard',
    '/events.html': 'events',
    '/event-detail.html': 'events',
    '/clients.html': 'clients',
    '/dishes.html': 'dishes',
    '/preferences.html': 'preferences',
    '/help.html': 'help'
};

const pageInitializers = {
    dashboard: () => import('./pages/dashboard.js').then(module => module.init(content.dashboard)),
    events: () => import('./pages/events.js').then(module => module.init(content)),
    clients: () => import('./pages/clients.js').then(module => module.init(content.clients)),
    dishes: () => import('./pages/dishes.js').then(module => module.init(content.dishes)),
    preferences: () => import('./pages/preferences.js').then(module => module.init(content.preferences)),
    help: () => import('./pages/help.js').then(module => module.init(content.help))
};

async function loadContent() {
    try {
        const response = await fetch('content.json');
        const jsonContent = await response.json();
        Object.assign(content, jsonContent);
    } catch (error) {
        console.error('Failed to load content.json:', error);
    }
}

function renderSidebar() {
    const nav = content.navigation;
    const appName = content.appName;
    
    const path = window.location.pathname;
    const currentPage = path.substring(path.lastIndexOf('/') + 1) || 'index.html';

    const sidebarHTML = `
        <aside id="sidebar" class="w-64 bg-indigo-600 text-white flex flex-col fixed inset-y-0 left-0 z-30 transform -translate-x-full transition-transform duration-300 ease-in-out md:relative md:translate-x-0">
            <div class="h-20 flex items-center justify-center border-b border-indigo-700">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-sky-400 rounded-lg flex items-center justify-center font-bold text-indigo-800 text-xl">
                        ${appName.charAt(0)}
                    </div>
                    <span class="text-2xl font-bold">${appName}</span>
                </div>
            </div>
            <nav class="flex-1 p-4 space-y-2">
                <a href="index.html" class="nav-link ${currentPage === 'index.html' ? 'active' : ''}">${nav.dashboard}</a>
                <a href="events.html" class="nav-link ${['events.html', 'event-detail.html'].includes(currentPage) ? 'active' : ''}">${nav.events}</a>
                <a href="clients.html" class="nav-link ${currentPage === 'clients.html' ? 'active' : ''}">${nav.clients}</a>
                <a href="dishes.html" class="nav-link ${currentPage === 'dishes.html' ? 'active' : ''}">${nav.dishes}</a>
            </nav>
            <div class="p-4 border-t border-indigo-700 space-y-2">
                 <a href="preferences.html" class="nav-link ${currentPage === 'preferences.html' ? 'active' : ''}">${nav.preferences}</a>
                 <a href="help.html" class="nav-link ${currentPage === 'help.html' ? 'active' : ''}">${nav.help}</a>
                 <div id="autosave-indicator" class="px-1 pt-2"></div>
            </div>
        </aside>
        <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>
    `;

    const style = document.createElement('style');
    style.textContent = `
        .nav-link { display: block; padding: 0.75rem 1rem; border-radius: 0.5rem; transition: background-color 0.2s; font-weight: 500; }
        .nav-link:hover { background-color: rgba(255, 255, 255, 0.1); }
        .nav-link.active { background-color: rgba(255, 255, 255, 0.2); }
    `;
    document.head.appendChild(style);

    const wrapper = document.getElementById('app-wrapper');
    wrapper.insertAdjacentHTML('afterbegin', sidebarHTML);
}

function initMobileMenu() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    const pageTitle = document.getElementById('page-title');

    if (!pageTitle) return;

    const menuButton = document.createElement('button');
    menuButton.id = 'menu-toggle';
    menuButton.className = 'p-2 rounded-md text-slate-600 hover:bg-slate-200 md:hidden';
    menuButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>`;
    
    pageTitle.insertAdjacentElement('beforebegin', menuButton);

    const toggleSidebar = () => {
        sidebar.classList.toggle('-translate-x-full');
        overlay.classList.toggle('hidden');
    };

    menuButton.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleSidebar();
    });
    overlay.addEventListener('click', toggleSidebar);
}

async function startAutoSave() {
    if (autoSaveInterval) clearInterval(autoSaveInterval);
    const indicator = document.getElementById('autosave-indicator');
    const handle = await fileSystem.loadFileHandle();
    
    if (!handle) {
        indicator.innerHTML = `
            <div class="flex items-center gap-2 text-amber-300 text-xs">
              <div class="w-2 h-2 rounded-full bg-amber-400"></div>
              <span>Auto-Save Inactive</span>
            </div>`;
        return;
    }
    
    const hasPermission = await fileSystem.checkPermission(handle, true);
    if(!hasPermission) {
        indicator.innerHTML = `
            <div class="flex items-center gap-2 text-amber-300 text-xs">
              <div class="w-2 h-2 rounded-full bg-amber-400"></div>
              <span>Permission Needed</span>
            </div>`;
        return;
    }

    indicator.innerHTML = `
        <div class="flex items-center gap-2 text-emerald-300 text-xs">
          <div class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></div>
          <span>Auto-Save Active</span>
        </div>`;

    autoSaveInterval = setInterval(async () => {
        if (window.isDataDirty) {
            try {
                console.log('Auto-saving changes...');
                const dataString = JSON.stringify(storage.getData(), null, 2);
                await fileSystem.writeFile(handle, dataString);
                window.isDataDirty = false;
                
                const syncStatusEl = document.getElementById('autosave-sync-status');
                if(syncStatusEl) {
                    syncStatusEl.textContent = `Last synced: ${new Date().toLocaleTimeString()}`;
                }
            } catch (err) {
                 console.error("Auto-save failed. Permission may have been revoked.", err);
                 indicator.innerHTML = `
                    <div class="flex items-center gap-2 text-red-400 text-xs">
                      <div class="w-2 h-2 rounded-full bg-red-500"></div>
                      <span>Auto-Save Failed</span>
                    </div>`;
                 clearInterval(autoSaveInterval);
                 await fileSystem.deleteFileHandle();
            }
        }
    }, 15000);
}


async function main() {
    storage.init();
    await loadContent();
    renderSidebar();
    initMobileMenu();
    await startAutoSave();

    let pageFile = window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1);
    
    if (pageFile === '' || pageFile.endsWith('/')) { // Handles root like "/", "/repo/", etc.
        pageFile = 'index.html';
    }
    
    const routePath = '/' + pageFile;
    const pageKey = routes[routePath];
    
    if (pageKey && pageInitializers[pageKey]) {
        try {
            await pageInitializers[pageKey]();
        } catch (error) {
            console.error(`Failed to initialize page: ${pageKey}`, error);
        }
    }
}

document.addEventListener('DOMContentLoaded', main);

### END OF FILE: ./assets/js/app.js ######################################################



### START OF FILE: ./assets/js/storage.js ####################################################

const DB_KEY = 'cateringAppData';

// "Dirty flag" to track if data has changed since last auto-save
window.isDataDirty = false;

const getInitialData = () => ({
    dishes: [],
    clients: [],
    events: [],
    settings: {}
});

export function init() {
    if (!localStorage.getItem(DB_KEY)) {
        localStorage.setItem(DB_KEY, JSON.stringify(getInitialData()));
    }
}

export function getData() {
    try {
        return JSON.parse(localStorage.getItem(DB_KEY));
    } catch (e) {
        console.error("Error parsing data from localStorage", e);
        return getInitialData();
    }
}

export function saveData(data) {
    localStorage.setItem(DB_KEY, JSON.stringify(data));
    window.isDataDirty = true; // Mark data as changed
}

// --- Generic CRUD Operations ---
function getItems(type) {
    const data = getData();
    return data[type] || [];
}

function saveItem(type, item) {
    const data = getData();
    if (!data[type]) data[type] = [];

    if (item.id) {
        const index = data[type].findIndex(d => d.id === item.id);
        if (index > -1) {
            // Update existing item, preserve original creation date
            const existingItem = data[type][index];
            data[type][index] = { ...existingItem, ...item };
        } else {
            // This case should ideally not happen for updates, but as a fallback...
            item.createdAt = new Date().toISOString();
            data[type].push(item);
        }
    } else {
        // Create new item
        item.id = Date.now().toString();
        item.createdAt = new Date().toISOString();
        data[type].push(item);
    }
    saveData(data);
    return item;
}

function deleteItem(type, id) {
    const data = getData();
    if (data[type]) {
        data[type] = data[type].filter(item => item.id !== id);
        saveData(data);
    }
}

// --- Specific Implementations ---
export const getDishes = () => getItems('dishes');
export const saveDish = (dish) => saveItem('dishes', dish);
export const deleteDish = (id) => deleteItem('dishes', id);

export const getClients = () => getItems('clients');
export const saveClient = (client) => saveItem('clients', client);
export const deleteClient = (id) => deleteItem('clients', id);

export const getEvents = () => getItems('events');
export const getEventById = (id) => getItems('events').find(event => event.id === id);
export const saveEvent = (event) => saveItem('events', event);
export const deleteEvent = (id) => deleteItem('events', id);

### END OF FILE: ./assets/js/storage.js ######################################################



